<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>庄子集释 - 深色版</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.8;
    font-size: 1.8em;
    background-color: #222;
    color: #ddd;
    padding: 20px;
  }
  .text { 
    max-width: 900px; 
    margin: auto;
    padding: 20px;
    background-color: #333;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }
  .annotation-btn {
    display: inline-block;
    background: #444;
    border: 1px solid #666;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.6em;
    color: #55aaff;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: #444;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    position: absolute;
    font-size: 0.7em;
    line-height: 1.6;
    color: #eee;
    border: 1px solid #666;
    cursor: move;
  }
  #popup-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #55aaff;
    border-bottom: 1px solid #666;
    padding-bottom: 5px;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #ddd;
  }
  h1 {
    text-align: center;
    color: #f8f8f8;
    margin-bottom: 30px;
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
  }
  h2 {
    color: #f0f0f0;
    border-bottom: 1px solid #555;
    padding-bottom: 5px;
  }
  ruby {
    ruby-position: under;
  }
  rt {
    font-size: 0.5em;
    color: #aaa;
  }
</style>
</head>
<body>
<div class="text">
<h1>庄子集释</h1>

<p>夫一言者，风波也；行者，实丧也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫言者，风波也，故行之则实丧矣。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫水因风而起波，譬心因言而喜怒也。因此风波之言而行喜怒者，则丧于实理者也。◎庆藩案波当读为播。郑注禹贡云：播，散也。波与播，古字通，言风播则易动也。风播与实丧对文，则不可作波浪训矣。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《实丧》息浪反。注、下同。◎家世父曰：实丧，犹言得失。实者，有而存之；丧者，忽而忘之。佹得而佹失者，行之大患也，故曰危。郭象注，行之则实丧矣，遗风波而弗行则实不丧矣，恐误。">【釋文】</span>
</span>。</p>

<p>夫风波易以动，实丧易以危<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="故遗风波而弗行，则实不丧矣。夫事得其实，则危可安而荡可定也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="风鼓水波，易为动荡，譬言丧实理，危殆不难也。">【疏】</span>
</span>。</p>

<p>故忿设无由，巧言偏辞<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫忿怒之作，无他由也，常由巧言过实，偏辞失当耳。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫施设忿怒，更无所由，每为浮伪巧言偏辞谄佞之故也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《偏辞》音篇。崔本作谝，音辩。">【釋文】</span>
</span>。</p>

<p>兽死不择音，气息茀然，于是并生心厉<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="譬之野兽，蹴之穷地，音急情尽，则和声不至而气息不理，茀然暴怒，俱生●疵以相对之。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫野兽困窘，迫之穷地，性命将死，鸣不择音，气息茀郁，心生疵疾，忽然暴怒，搏噬于人。此是起譬也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《气息》并如字。向本作●器，云：●，马氏作息。器，气也。崔本作●●，云：喘息●不调也。又作荜字。《茀然》徐符弗反。郭敷末反。李音怫。崔音勃。《心厉》如字，李音赖。《蹴之》子六反。《●》疑卖反，又音诣。本又作疣，音尤。《疵》士卖反，又齐计反。上若作疣，此则才知反。◎卢文弨曰：盖读与睚眦同。">【釋文】</span>
</span>。</p>

<p>剋核大至，则必有不肖之心应之，而不知其然也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫宽以容物，物必归焉。剋核太精，则鄙吝心生而不自觉也。故大人荡然放物于自得之场，不苦人之能，不竭人之欢，故四海之交可全矣。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫剋切责核，逼迫太甚，则不善之心欻然自应，情事相感，物理自然。是知躁则失君，宽则得众也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《剋核》幸格反。">【釋文】</span>
</span>。</p>

<p>苟为不知其然也，孰知其所终！<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="苟不自觉，安能知祸福之所齐诣也！">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫急躁忤物，必拒之理，数自相召，不知所以。且当时以不肖应之，则谁知终后之祸者邪？">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《所齐》如字，又才计反。◎庆藩案文选鲍明远拟古诗注引司马云：谁知祸之所终者也。">【釋文】</span>
</span></p>

<p>故法言曰：『无迁令<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="传彼实也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="承君令命，以实传之，不得以临时喜怒辄为迁改者也。">【疏】</span>
</span>，</p>

<p>无劝成<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="任其自成。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="直陈君令，任彼事情，无劳劝奖，强令成就也。">【疏】</span>
</span>，</p>

<p>过度益也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="益则非任实者。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="安于天命，率性任情，无劳添益语言，过于本度也。">【疏】</span>
</span>。</p>

<p>迁令劝成殆事<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="此事之危殆者。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="故改其君命，强劝彼成，其于情事，大成危殆。">【疏】</span>
</span>，</p>

<p>美成在久<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="美成者任其时化，譬之种植，不可一朝成。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="心之所美，率意而成，不由劝奖，故能长久。◎家世父曰：美者久于其道而后化成，一日之成，不足恃也，恶者一成而遂不及改。美恶几微之辨，而难易形焉。是以就美而去恶者，人之常情也，而势常不相及，有反施之而习而安焉者矣。注意似隔。">【疏】</span>
</span>，</p>

<p>恶成不及改<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="彼之所恶而劝强成之，则悔败寻至。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="心之所恶，强劝而成，不及多时，寻当改悔。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《所恶》乌路反。《劝窃》其丈反。下欲窃同。">【釋文】</span>
</span>，</p>

<p>可不慎与<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="处涉人世，啣命使乎，先圣法言，深宜戒慎。">【疏】</span>
</span>！</p>

<p>且夫乘物以游心<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="寄物以为意也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫独化之士，混迹人间，乘有物以遨游，运虚心以顺世，则何殆之有哉！">【疏】</span>
</span>，</p>

<p>托不得已以养中，至矣<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="任理之必然者，中庸之符全矣，斯接物之至者也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="不得已者，理之必然也。寄必然之事，养中和之心，斯真理之造极，应物之至妙者乎！">【疏】</span>
</span>。</p>

<p>何作为报也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="当任齐所报之实，何为为齐作意于其间哉！">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="率己运命，推理而行，何须预生抑度，为齐作报也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《为为》上如字，下于伪反。">【釋文】</span>
</span>！</p>

<p>莫若为致命。此其难者<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="直为致命最易，而以喜怒施心，故难也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="直致率情，任于天命，甚自简易，岂有难邪！此其难者，言不难。">【疏】</span>
</span>。</p>

<p>颜阖将傅卫灵公太子<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="姓颜，名阖，鲁之贤人也。太子，蒯聩也。颜阖自鲁适卫，将欲为太子之师傅也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《颜阖》胡腊反。向崔本作廅。鲁之贤人隐者。◎卢文弨曰：今本廅作盍。《卫灵公》左传云名元。《太子》音泰。司马云：蒯聩也。">【釋文】</span>
</span>，</p>

<p>而问于蘧伯玉曰："有人于此，其德天杀<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="姓蘧，名瑗，字伯玉，卫之贤大夫。蒯聩禀天然之凶德，持杀戮以快心。既是卫国之君，故言有人于此。将为储君之傅，故询道于哲人。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《蘧》其居反。《伯玉》名瑗，卫大夫。《天杀》如字，谓如天杀物也。徐所列反。">【釋文】</span>
</span>。</p>

<p>与之以为无方，则危吾国；与之为有方，则危吾身<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫小人之性，引之轨制则憎己，纵其无度则乱邦。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="方，犹法。禀性凶顽，不履仁义。与之方法，而轨制憎己，所以危身；纵之无度，而荒淫颠蹶，所以亡国。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《无方》李云：方，道也。">【釋文】</span>
</span>。</p>

<p>其知适足以知人之过，而不知其所以过<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="不知民过之由己，故罪责于民而不自改。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="己之无道，曾不悛革，百姓有罪，诛戮极深。唯见黔首之㇌，不知过之由己。既知如风靡草，是知责在于君。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《其知》音智。">【釋文】</span>
</span>。</p>

<p>若然者，吾柰之何<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="然，犹如是。将柰之何，询道蘧瑗，故陈其所以。">【疏】</span>
</span>？"</p>

<p>蘧伯玉曰："善哉问乎！戒之，慎之，正女身也哉<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="反复与会，俱所以为正身。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="戒，勗也。己身不可率耳。防慎储君，勿轻犯触，身履正道，随顺机宜。前叹其能问，后则示其方法也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《正女》音汝。下同。《反复》芳服反。">【釋文】</span>
</span>！</p>

<p>形莫若就，心莫若和<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="形不乖迕，和而不同。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="身形从就，不乖君臣之礼。心智和顺，迹混而事济之也。">【疏】</span>
</span>。</p>

<p>虽然，之二者有患<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="前之二条，略标方术。既未尽善，犹有其患累也。">【疏】</span>
</span>。</p>

<p>就不欲入<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="就者形顺，入者遂与同。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="郭注云，就者形顺，入者遂与同也。">【疏】</span>
</span>，</p>

<p>和不欲出<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="和者义济，出者自显伐。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="心智和顺，方便接引，推功储君，不显己能，斯不出也。">【疏】</span>
</span>。</p>

<p>形就而入，且为颠为灭，为崩为蹶<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="若遂与同，则是颠危而不扶持，与彼俱亡矣。故当模格天地，但不立小异耳。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="颠，覆也。灭，绝也。崩，坏也。蹶，败也。形容从就，同入彼恶，则是颠危而不扶持，故致颠覆灭绝，崩蹶败坏，与彼俱亡也矣。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《为蹶》徐其月反。郭音厥。李举卫反。《摸格》莫胡反。◎卢文弨曰：今本摸从木作模。">【釋文】</span>
</span>。</p>

<p>心和而出，且为声为名，为妖为孽<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="自显和之，且有含垢之声；济彼之名，彼将恶其胜己，妄生妖孽。故当闷然若晦，玄同光尘，然后不可得而亲，不可得而疏，不可得而利，不可得而害。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="变物为妖。孽，灾也。虽复和光同尘，而自显出己智，不能韬光晦迹，故有济彼之名。蒯聩恶其胜己，谓其妄生妖孽，故以事而害之。◎家世父曰：和，始五味之相济，甘辛并用，混合无形。若表而出之，则非和矣。时其喜怒，因其缓急，以调伏其机，而不与为迎拒。有迎拒斯有出入，和不欲出，为无拒也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《孽》彦列反。《将恶》乌路反。《闷然》音门。">【釋文】</span>
</span>。</p>

<p>彼且为婴儿，亦与之为婴儿；彼且为无町畦，亦与之为无町畦；彼且为无崖，亦与之为无崖。达之，入于无疵<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="不立圭角以逆其鳞也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="町，畔也。畦，垺也。与，共也。入，会也。夫处世接物，其道实难。不可遂与和同，亦无容顿生乖忤。或同婴儿之愚鄙，且复无知；或类田野之无畦，略无界畔；纵奢侈之贪求，任凶猛之杀戮。然后道之以德，齐之以礼。达斯趣者，方会无累之道也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《婴儿》李云：喻无意也。崔云：喻骄游也。《无町》徒顶反。《畦》户圭反。李云：町畦，畔埒也。无畔埒，无威仪也。崔云：喻守节。《无崖》司马云：不顾法也。《无疵》似移反。病也。">【釋文】</span>
</span>。</p>

<p>汝不知夫螳蜋乎？怒其臂以当车辙，不知其不胜任也，是其才之美者也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫螳蜋之怒臂，非不美也；以当车辙，顾非敌耳。今知之所无柰何而欲强当其任，即螳蜋之怒臂也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="螳蜋，有斧虫也。夫螳蜋鼓怒其臂以当轩车之辙，虽复自恃才能之美善，而必不胜举其职任。喻颜阖欲以己之才能以当储君之势，何异乎螳蜋怒臂之当车辙也！">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《不胜》音升。◎庆藩案御览九百四十六引司马云：非不有美才，顾不胜任耳。释文阙。">【釋文】</span>
</span>。</p>

<p>戒之，慎之！积伐而美者以犯之，几矣<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="积汝之才，伐汝之美，以犯此人，危殆之道。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="积，蕴蓄也。而，汝也。几，危也。既傅储君，应须戒慎，今乃蕴蓄才能，自矜汝美，犯触威势，必致危亡。">【疏】</span>
</span>。</p>

<p>汝不知夫养虎者乎？不敢以生物与之，为其杀之之怒也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="恐其因有杀心而遂怒也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="汝颇知世有养虎之法乎？猪羊之类，不可生供猛兽，恐其因杀而生嗔怒也。◎家世父曰：几矣，言其怒视螳蜋，几近之也。此不自量其才者也。虎之怒也，而可使驯，马之良也，而使缺衔毁首碎胸以怒，无他，勿与撄之而已。螳蜋之撄车辙，奚所利而为之哉！">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《为其》于伪反。下同。">【釋文】</span>
</span>；</p>

<p>不敢以全物与之，为其决之之怒也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="方使虎自啮分之，则因用力而怒矣。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="汝颇知假令以死物投兽，犹须先为分决，若使虎自啮分，恐因用力而怒之也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《分之》如字。">【釋文】</span>
</span>；</p>

<p>时其饥饱，达其怒心<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="知其所以怒而顺之。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="知饥饱之时，达喜怒之节，通于物理，岂复危亡！">【疏】</span>
</span>。</p>

<p>虎之与人异类而媚养己者，顺也；故其杀者，逆也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="顺理则异类生爱，逆节则至亲交兵。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫顺则悦媚，虎狼可以驯狎；逆则杀害，至亲所以交兵。媚己之道既同，涉物之方无别也。◎家世父曰：达其怒心，自有作用。所谓顺者，非务徇其欲也，无使杀焉而不导之以为怒也，无使决焉而不纵之以为怒也。苟无撄其怒而已，其心常有所自达焉，则顺矣。">【疏】</span>
</span>。</p>

<p>夫爱马者，以筐盛矢，以蜄盛溺<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="矢溺至贱，而以宝器盛之，爱马之至者也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="蜄，大蛤也。爱马之屎，意在贵重。屎溺至贱，以大蜄盛之，情有所滞，遂至于是也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《盛矢》音成。下及注同。矢或作屎，同。《以蜄》徐市轸反，蛤类。《溺》奴吊反。">【釋文】</span>
</span>。</p>

<p>适有徱虻仆缘<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="仆仆然群著马。">【注】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《徱》音文。本或作●，同。《虻》孟庚反。《仆缘》普木反，徐敷木反。向云：仆仆然，徱虻缘马稠穊之貌。崔音如字，云：仆御。◎王念孙曰：案向崔二说皆非也。仆之言附也，言徱虻附缘于马体也。仆与附，声近而义同。大雅既醉篇景命有仆，毛传曰：仆，附也。郑笺曰：天之大命又附著于女。文选子虚赋注引广雅曰：仆，谓附著于人。（案今广雅无此语。广雅疑广仓之讹。）《群著》直略反。">【釋文】</span>
</span>，</p>

<p>而拊之不时<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="虽救其患，而掩马之不意。">【注】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《而拊》李音抚，又音付，一音附。崔本作府，音附。">【釋文】</span>
</span>，</p>

<p>则缺衔毁首碎胸<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="掩其不备，故惊而至此。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="仆，聚也。拊，拍也。衔，勒也。适有徱虻，群聚缘马，主既爱惜，卒然拊之，意在除害。不定时节，掩马不意，忽然惊骇，于是马缺衔勒，挽破辔头，人遭蹄蹋，毁首碎胸者也。">【疏】</span>
</span>。</p>

<p>意有所至而爱有所亡，可不慎邪<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="意至除患，率然拊之，以至毁碎，失其所以爱矣。故当世接物，逆顺之际，不可不慎也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="亡，犹失也。意之所至，在乎爱马，既以毁损，即失其所爱。人间涉物，其义亦然，机感参差，即遭祸害。拊马之喻，深宜慎之也。◎家世父曰：人与人相接而成世，而美恶生焉，从违判焉，顺逆形焉。如是而大患因之以生，谓人之不足与处也，而乌知己之不足与处人也！处己以无用，斯得之矣。德荡乎名，知出乎争，为此一篇之主脑。篇尾五段，去名与争，乃可出入于人间世。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《率然》疏律反。本或作卒，七忽反。">【釋文】</span>
</span>！"</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-title"></div>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  // 拖拽功能变量
  let isDragging = false;
  let offsetX, offsetY;

  // 开始拖拽
  popup.addEventListener('mousedown', (e) => {
    if (e.target === closeBtn) return;
    isDragging = true;
    offsetX = e.clientX - popup.getBoundingClientRect().left;
    offsetY = e.clientY - popup.getBoundingClientRect().top;
    popup.style.cursor = 'grabbing';
  });

  // 拖拽中
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    popup.style.left = (e.clientX - offsetX) + 'px';
    popup.style.top = (e.clientY - offsetY) + 'px';
    popup.style.transform = 'none'; // 移除居中定位
  });

  // 结束拖拽
  document.addEventListener('mouseup', () => {
    isDragging = false;
    popup.style.cursor = 'move';
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = type;
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      
      // 显示弹窗
      overlay.style.display = 'flex';
      
      // 初始居中定位
      popup.style.left = '50%';
      popup.style.top = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      
      e.stopPropagation();
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>