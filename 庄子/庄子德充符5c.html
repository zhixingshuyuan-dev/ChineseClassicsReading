<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>庄子集释 - 德充符</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.8;
    font-size: 1.8em;
    background-color: #222;
    color: #ddd;
    padding: 20px;
  }
  .text { 
    max-width: 900px; 
    margin: auto;
    padding: 20px;
    background-color: #333;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }
  .annotation-btn {
    display: inline-block;
    background: #444;
    border: 1px solid #666;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.6em;
    color: #55aaff;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: #444;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    position: absolute;
    font-size: 0.7em;
    line-height: 1.6;
    color: #eee;
    border: 1px solid #666;
    cursor: move;
  }
  #popup-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #55aaff;
    border-bottom: 1px solid #666;
    padding-bottom: 5px;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #ddd;
  }
  h1 {
    text-align: center;
    color: #f8f8f8;
    margin-bottom: 30px;
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
  }
  h2 {
    color: #f0f0f0;
    border-bottom: 1px solid #555;
    padding-bottom: 5px;
  }
  ruby {
    ruby-position: under;
  }
  rt {
    font-size: 0.5em;
    color: #aaa;
  }
</style>
</head>
<body>
<div class="text">
<h1>庄子集释</h1>

<h2>内篇 德充符第五</h2>

<p>哀公曰：「何謂才全<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="前雖標舉，於義未彰，故發此疑，庶希後答。">【疏】</span>
</span>？」</p>

<p>仲尼曰：「死生存亡，窮達貧富，賢與不肖毀譽，飢渴寒暑，是事之變，命之行也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="其理固當，不可逃也。故人之生也，非誤生也；生之所有，非妄有也。天地雖大，萬物雖多，然吾之所遇適在於是，則雖天地神明，國家聖賢，絕力至知而弗能違也。故凡所不遇，弗能遇也，其所遇，弗能不遇也；凡所不為，弗能為也，其所為，弗能不為也；故付之而自當矣。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫二儀雖大，萬物雖多，人生所遇，適在於是。故前之八對，並是事物之變化，天命之流行，而留之不停，推之不去，安排任化。所遇斯適。自非德充之士，其孰能然！此則仲尼答哀公才全之義。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《毀譽》音餘。">【釋文】</span>
</span>；</p>

<p>日夜相代乎前<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫命行事變，不舍晝夜，推之不去，留之不停。故才全者，隨所遇而任之。">【注】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《不舍》音捨。">【釋文】</span>
</span>，而知不能規乎其始者也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫始非知之所規，而故非情之所留。是以知命之必行，事之必變者，豈於終規始，在新戀故哉？雖有至知而弗能規也。逝者之往，吾柰之何哉！">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫命行事變，其速如馳；代謝遷流，不舍晝夜。一前一後，反覆循環，雖有至知，不能測度，豈復在新戀故，在終規始哉？蓋不然也。唯當隨變任化，則無往而不逍遙也。">【疏】</span>
</span>。</p>

<p>故不足以滑和<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="苟知性命之固當，則雖死生窮達，千變萬化，淡然自若而和理在身矣。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="滑，亂也。雖復事變命遷，而隨形任化，淡然自若，不亂於中和之道也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《以滑》音骨。《淡然》徒蹔反。">【釋文】</span>
</span>，不可入於靈府<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="靈府者，精神之宅也。夫至足者，不以憂患經神，若皮外而過去。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="靈府者，精神之宅，所謂心也。經寒暑，治亂，千變萬化，與物俱往，未當概意，豈復關心耶！">【疏】</span>
</span>。</p>

<p>使之和豫，通而不失於兌<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="苟使和性不滑，靈府閒豫，則雖涉乎至變，不失其兌然也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="兌，遍悅也。體窮通，達生死，遂使所遇和樂，中心逸豫，經涉夷險，兌然自得，不失其適悅也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《於兌》徒外反。李云：悅也。《閒豫》音閑。">【釋文】</span>
</span>；</p>

<p>使日夜無郤<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="泯然常任之。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="郤，閒也。駘它流轉，日夜不停，心心相係，亦無閒斷也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《無郤》去逆反。李云：閒也。">【釋文】</span>
</span>而與物為春<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="群生之所賴也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="慈照有生，恩霑動植，與物仁惠，事等青春。">【疏】</span>
</span>，是接而生時於心者也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="順四時而俱化。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="是者，指斥以前事也。才全之人，接濟群品，生長萬物，應赴順時，無心之心，逗機而照者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《是接而生時乎心者也》司馬云：接至道而和氣在心也。李云：接萬物而施生，順四時而俱作。◎盧文弨曰：今本書乎作於。">【釋文】</span>
</span>。</p>

<p>是之謂才全<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="總結以前，是才全之義也。">【疏】</span>
</span>。」</p>

<p>「何謂德不形<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="已領才全，未悟德不形義。更相發問，庶聞後旨也。">【疏】</span>
</span>？」</p>

<p>曰：「平者，水停之盛也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="天下之平，莫盛於停水也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="停，止也。而天下均平，莫盛於止水。故上文云人莫鑒於流水而必鑒於止水。此舉為譬，以彰德不形義故也。">【疏】</span>
</span>。</p>

<p>其可以為法也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="無情至平，故天下取正焉。">【注】</span>
</span>，內保之而外不蕩也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="內保其明，外無情偽，玄鑒洞照，與物無私，故能全其平而行其法也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫水性澄清，鑒照於物，大匠雖巧，非水不平。故能保守其明而不波蕩者，可以軌轍工人，洞鑒妍醜也。故下文云水平中準，大匠取則焉。況至人冥真合道，和光利物，模楷蒼生，動而常寂，故云內保之而外不蕩者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《情為》于偽反。◎慶藩案情為即情偽也。古為偽二字通用。史記小司馬本五帝紀平秩南為，漢書王莽傳作南偽。禮月令作為淫巧，鄭注曰：今月令作為作詐偽。左定公十二年傳子偽不知，釋文：偽，一作為。荀子性惡篇，可學而能，可事而成之在人者謂之偽。偽即為也。皆其證。">【釋文】</span>
</span>。</p>

<p>德者，成和之脩也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="事得以成，物得以和，謂之德也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫成於庶事，和於萬物者，非盛德孰能之哉！必也先須修身立行，後始可成事和物。物得以和而我不喪者，方可以謂之德也。">【疏】</span>
</span>。</p>

<p>德不形者，物不能離也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="無事不成，無物不和，此德之不形也。是以天下樂推而不厭。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫明齊日月而歸明於昧，功侔造化而歸功於物者，此德之不形也。是以含德之厚，比於赤子，天下樂推而不厭，斯物不離之者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《能離》力智反。">【釋文】</span>
</span>。」</p>

<p>哀公異日以告閔子曰：「始也吾以南面而君天下，執民之紀而憂其死，吾自以為至通矣。今吾聞至人之言，恐吾無其實，輕用吾身而亡其國。吾與孔丘，非君臣也，德友而已矣<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="聞德充之風者，雖復哀公，猶欲遺形骸，忘貴賤也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="姓閔，名損，字子騫，宣尼門人，在四科之數，甚有孝德，魯人也。異日，猶它日也。南面，君位也。初始未悟，矜於魯君，執持綱紀，憂於兆庶，養育教誨，恐其夭死。用斯治術，為至美至通。今聞尼父言談，且陳才德之義，魯侯悟解，方覺前非。至通憂死之言，更成虛幻；執紀南面之大，都無實錄；於是隳肢體，黜聰明，遺尊卑，忘爵位，觀魯邦若蝸角，視己形如隙影，友仲尼以全道德，禮司寇以異君臣。故知莊老之談，其風清遠，德充之美，一至於斯。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《閔子》孔子弟子閔子騫也。">【釋文】</span>
</span>。」</p>

<p>闉跂支離無脤說衛靈公，靈公說之；而視全人，其脰肩肩。甕㼜大癭說齊桓公，桓公說之；而視全人，其脰肩肩<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="偏情一往，則醜者更好而好者更醜也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="闉，曲也，謂攣曲企腫而行。脤，脣也，謂支體坼裂，傴僂殘病，復無脣也。㼜，盆也。脰，頸也。肩肩，細小貌也。而支離殘病，企腫而行；瘤癭之病，大如盆甕。此二人者，窮天地之陋，而俱能忘形建德，體道談玄。遂使齊衛兩君，欽風愛悅，美其盛德，不覺病醜，顧視全人之頸，翻小而自肩肩者。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《闉》音因，郭烏年反。《跂》音企，郭其逆反。《支離無脤》徐市軫反，又音脣。司馬云：闉，曲；跂，企也。闉跂支離，言腳常曲，行體不正卷縮也。無脤，名也。崔云：闉跂，偃者也。支離，傴者也。脤，脣同。簡文云：跂，行也。脤，臀也。◎慶藩案慧琳一切經音義一百肇論卷上引司馬云：跂，望也。釋文闕。《說衛》始銳反，又如字。下說齊桓同。《說之》音悅。下說之同。《脰》音豆，頸也。《肩肩》胡咽反，又胡恩反。李云：羸小貌。崔云：猶玄玄也。簡文云：直貌。◎李楨曰：攷工梓人文數目顅脰，注云：顅，長脰貌，與肩肩義合。知肩是省借，本字當作顅。並可据鄭注補釋文一義。《甕》烏送反，郭於寵反。《㼜》烏葬反，郭於兩反。李云：甕㼜，大癭貌。崔同。《大癭》一領反。說文云：瘤也。">【釋文】</span>
</span>。</p>

<p>故德有所長而形有所忘<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="其德長於順物，則物忘其醜；長於逆物，則物忘其好。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="大癭支離，道德長遠，遂使齊侯衛主，忘其形惡。">【疏】</span>
</span>，人不忘其所忘而忘其所不忘，此謂誠忘<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="生則愛之，死則棄之。故德者，世之所不忘也；形者，理之所不存也。故夫忘形者，非忘也；不忘形而忘德者，乃誠忘也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="誠，實也。所忘，形也；不忘，德也；忘形易而忘德難也，故謂形為所忘，德為不忘也。不忘形而忘德者，此乃真實忘。斯德不形之義也。">【疏】</span>
</span>。</p>

<p>故聖人有所遊<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="遊於自得之場，放之而無不至者，才德全也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="物我雙遣，形德兩忘，故放任乎變化之場，遨遊於至虛之域也。">【疏】</span>
</span>，而知為孽，約為膠，德為接，工為商<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="此四者自然相生，其理已具。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="夫至人道邁三清而神遊六合，故蘊智以救殃孽，約束以檢散心，樹德以接蒼生，工巧以利群品。此之四事，凡類有之，大聖慈救，同塵順物也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《而知》音智，下同。《為孽》魚列反。司馬云：智慧生妖孽。《約為膠》司馬云：約束而後有如膠漆。崔云：約誓所以為膠固。《德為接》司馬云：散德以接物也。《工為商》司馬云：工巧而商賈起。">【釋文】</span>
</span>。</p>

<p>聖人不謀，惡用知？不斲，惡用膠？無喪，惡用德？不貨，惡用商？<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="自然已具，故聖人無所用其己也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="惡，何也。至人不殃孽謀謨，何用智惠？不散亂彫斲，何用膠固？本不喪道，用德何為？不貴難得之貨，無勞商賈。衹為和光利物，是故有之者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《惡用》音烏，下同。《不斲》陟角反。《無喪》息浪反。">【釋文】</span>
</span></p>

<p>四者，天鬻也。天鬻者，天食也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="言自然而稟之。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="鬻，食也。食，稟也。天，自然也。以前四事，蒼生有之，稟自天然，各率其性，聖人順之，故無所用己也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《天鬻》音育，養也。《天食》音嗣，亦如字。">【釋文】</span>
</span>。</p>

<p>既受食於天，又惡用人<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="既稟之自然，其理已足。則雖沈思以免難，或明戒以避禍，物無妄然，皆天地之會，至理所趣。必自思之，非我思也；必自不思，非我不思也。或思而免之，或思而不免，或不思而免之，或不思而不免。凡此皆非我也，又奚為哉？任之而自至也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="稟之自然，各有定分。何須分外添足人情！違天任人，故至悔者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《受食》如字，又音嗣。《沈思》息嗣反，亦如字。《免難》乃旦反。">【釋文】</span>
</span>！</p>

<p>有人之形<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="視其形貌若人。">【注】</span>
</span>，無人之情<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="掘若槁木之枝。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="聖人同塵在世，有生處之形容；體道虛忘，無是非之情慮。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《掘若》其勿反。《槁木》苦老反。">【釋文】</span>
</span>。</p>

<p>有人之形，故群人<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="類聚群分，自然之道。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="和光混跡，群聚世間。此解有人之形。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《群分》如字。">【釋文】</span>
</span>；</p>

<p>無人之情，故是非不得於身<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="無情，故付之於物也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="譬彼靈真，絕無性識；既忘物我，何有是非！此解無人之情故也。">【疏】</span>
</span>。</p>

<p>眇乎小哉，所以屬於人也<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="形貌若人。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="屬，係也。跡閔嚚俗，形係人群，與物不殊，故稱眇小也。此結有人之形耳。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《眇》亡小反。簡文云：陋也。◎慶藩案慧琳一切經音義九十八廣弘明集音卷十五引司馬云：眇，高視也。釋文闕。">【釋文】</span>
</span>！</p>

<p>謷乎大哉，獨成其天<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="無情，故浩然無不任。無不任者，有情之所未能也，故無情而獨成天也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="謷，高大貌也。謷然大教，萬境都忘，智德高深，凝照弘遠。故歎美大人，獨成自然之至。此結無人之情也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《謷乎》五羔反，徐五報反。簡文云：放也。今取遨遊義也。《獨成其天》如字。崔本天字作大，云：類同於人，所以為小；情合於天，所以為大">【釋文】</span>
</span>！」</p>

<p>惠子謂莊子曰：「人故無情乎<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="前文云，有人之形，無人之情。惠施引此語來質疑。莊子所言人者，必固無情慮乎？然莊惠二賢，並遊心方外，故常稟而為論端。">【疏】</span>
</span>？」</p>

<p>莊子曰：「然<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="然，如是也。許其所問，故答云然。">【疏】</span>
</span>。」</p>

<p>惠子曰：「人而無情，何以謂之人<span class="annotation-group">
  <span class="annotation-btn" data-type="疏" data-content="若無情智，何名為人？此是惠施進責之辭，問於莊子。">【疏】</span>
</span>？」</p>

<p>莊子曰：「道與之貌，天與之形<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="生理已自足於形貌之中，但任之則身存。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="道與形貌，生理已足，但當任之，無勞措意也。">【疏】</span>
</span>，無以好惡內傷其身<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫好惡之情，非所以益生，祇足以傷身，以其生之有分也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="還將益以酬後問也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《無以好惡》呼報反。下烏路反。注同。《祇足》音支。">【釋文】</span>
</span>。</p>

<p>今子外乎子之神，勞乎子之精，倚樹而吟，據槁梧而瞑<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="夫神不休於性分之內，則外矣；精不止於自生之極，則勞矣。故行則倚樹而吟，坐則據梧而睡，言有情者之自困也。">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="槁梧，夾膝几也。惠子未遺筌蹄，耽內名理，疏外神識，勞苦精靈，故行則倚樹而吟詠，坐則隱几而談說，是以形勞心倦，疲怠而瞑者也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《倚樹》於綺反。《據槁》苦老反。《梧》音吾。《而瞑》音眠。崔云：據琴而睡也。《而睡》垂臂反。">【釋文】</span>
</span>。</p>

<p>天選子之形，子以堅白鳴<span class="annotation-group">
  <span class="annotation-btn" data-type="注" data-content="言凡子所為，外神勞精，倚樹據梧，且吟且睡，此世之所謂情也。而云天選，明夫情者非情之所生，而況他哉！故雖萬物萬形，云為趣舍，皆在無情中來，又何用情於其閒哉！">【注】</span>
  <span class="annotation-btn" data-type="疏" data-content="選，授也。鳴，言說也。自然之道，授與汝形，夭壽妍醜，其理已定，無勞措意，分外益生。而子稟性聰明，辨析名理，執持己德，炫燿眾人。亦何異乎公孫龍作白馬論，云白馬非馬，堅守斯論，以此自多！信有其言而無其實，能伏眾人之口，不能伏眾人之心。今子分外誇談，即是斯之類也。">【疏】</span>
  <span class="annotation-btn" data-type="釋文" data-content="《天選》宣轉反，舊思緩反。">【釋文】</span>
</span>！」</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-title"></div>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  // 拖拽功能变量
  let isDragging = false;
  let offsetX, offsetY;

  // 开始拖拽
  popup.addEventListener('mousedown', (e) => {
    if (e.target === closeBtn) return;
    isDragging = true;
    offsetX = e.clientX - popup.getBoundingClientRect().left;
    offsetY = e.clientY - popup.getBoundingClientRect().top;
    popup.style.cursor = 'grabbing';
  });

  // 拖拽中
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    popup.style.left = (e.clientX - offsetX) + 'px';
    popup.style.top = (e.clientY - offsetY) + 'px';
    popup.style.transform = 'none'; // 移除居中定位
  });

  // 结束拖拽
  document.addEventListener('mouseup', () => {
    isDragging = false;
    popup.style.cursor = 'move';
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = type;
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      
      // 显示弹窗
      overlay.style.display = 'flex';
      
      // 初始居中定位
      popup.style.left = '50%';
      popup.style.top = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      
      e.stopPropagation();
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>