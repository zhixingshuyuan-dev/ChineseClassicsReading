<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>è¥¿æ¸¸æ±‰å­—æ¢ç§˜</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .sentence {
      margin-bottom: 10px;
      font-size: 48px;
    }
    .char {
      display: inline-block;
      margin: 5px;
      padding: 10px;
      border: 1px solid #ccc;
      cursor: pointer;
      user-select: none;
    }
    .char.known {
      background-color: #eee;
      color: #888;
      pointer-events: none;
    }
    .box {
      width: 200px;
      min-height: 100px;
      border: 2px dashed #666;
      margin: 10px;
      padding: 10px;
      display: inline-block;
      vertical-align: top;
      overflow-y: auto;
      max-height: 300px;
    }
    .box h3, .box h4 {
      margin: 0 0 10px 0;
    }
    #structure-container {
      display: flex;
      gap: 20px;
    }
    #structure-container .box {
      width: 600px;
    }
    #structure-container img {
      width: 100px;
      height: auto;
      margin-bottom: 5px;
    }
    #feedback {
      margin-top: 20px;
      font-size: 18px;
      color: green;
    }
    .info {
      margin-top: 10px;
      font-size: 18px;
      color: #333;
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
    }
    .word-display {
      font-size: 20px;
    }
    .phrase-display {
      font-size: 72px;
      line-height: 2.2;
    }
    #nextButton, #skipButton {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
    }
    .completion {
      background-color: #e0ffe0;
      padding: 20px;
      border: 2px solid #00aa00;
      border-radius: 10px;
      font-size: 24px;
      margin-top: 30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>è¥¿æ¸¸æ±‰å­—æ¢ç§˜ï¼šé—¯å…³å­¦æ±‰å­—</h1>
  <p>å¤šæ¬¡ç‚¹å‡»åŸæ–‡æ±‰å­—ï¼Œæœ‰æƒŠå–œï¼Click characters multiple times to discover surprises!</p>

  <div class="sentence" id="sentence"></div>
  <button id="readSentenceBtn">ğŸ”Š æœ—è¯»æ•´å¥</button>
  <button id="nextButton">ä¸‹ä¸€å¥</button>
  <button id="skipButton">è·³è¿‡æ­¤å¥</button>
  <div class="info" id="charInfo"></div>

  <div id="structure-container">
    <div class="box" id="singleBox" ondragover="allowDrop(event)" ondrop="drop(event, 'single')">
      <h3>ç‹¬ä½“å­—</h3>
    </div>
    <div class="box" id="structure-updown" ondragover="allowDrop(event)" ondrop="drop(event, 'updown')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f1/%E4%B8%8A%E4%B8%8B%E7%BB%93%E6%9E%84.svg" alt="ä¸Šä¸‹ç»“æ„">
      <h4>ä¸Šä¸‹ç»“æ„ (Top-Bottom Structure)</h4>
    </div>
    <div class="box" id="structure-leftright" ondragover="allowDrop(event)" ondrop="drop(event, 'leftright')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/1/1f/%E5%B7%A6%E5%8F%B3%E7%BB%93%E6%9E%84.svg" alt="å·¦å³ç»“æ„">
      <h4>å·¦å³ç»“æ„ (Left-Right Structure)</h4>
    </div>
    <div class="box" id="structure-enclose" ondragover="allowDrop(event)" ondrop="drop(event, 'enclose')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/0e/%E5%8C%85%E5%9B%B4%E7%BB%93%E6%9E%84.svg" alt="åŒ…å›´ç»“æ„">
      <h4>åŒ…å›´ç»“æ„ (Enclosed Structure)</h4>
    </div>
  </div>

  <div id="feedback"></div>
  <div id="completion" class="completion" style="display: none;">ğŸ‰ æ­å–œä½ ï¼Œå®Œæˆæ‰€æœ‰å¥å­ï¼Congratulations, you've finished all the sentences!</div>

  <script>
    const sentences = [
      "å´è¯´é‚£é•¿è€ä¸å…«æˆ’æŒ‘ç€è¡Œæï¼Œç‰µç€é©¬ï¼Œæ…¢æ…¢çš„èµ°ã€‚",
      "å¿½å¬å¾—æ¾æ—èƒŒåæœ‰äººå«é“ï¼šâ€œé‚£æŒ‘æ‹…çš„ä¸”æ…¢èµ°ï¼â€",
      "åŸæ¥æ˜¯é‚£æ‘ä¸­çŒæˆ·ï¼Œæ›¾è§è¿‡å…«æˆ’ç›¸è²Œã€‚",
      "å¿™èµ¶ä¸Šå«é“ï¼šâ€œé•¿è€ï¼Œé‚£é‡Œå»ï¼Ÿâ€",
      "ä¸‰è—æ¬ èº«ç­”é“ï¼šâ€œä¸Šè¥¿å¤©å»ã€‚â€",
      "é‚£äººé“ï¼šâ€œè¥¿å¤©è·¯ä¸Šå¤šè™ç‹¼ï¼Œé¡»å¾—å¤šäººæŠ¤é€æ–¹å¯ã€‚â€",
      "ä¸‰è—é“ï¼šâ€œè´«åƒ§åªæ±‚å–ç»ï¼Œä¸è¾è¾›è‹¦ã€‚â€",
      "é‚£äººåˆé“ï¼šâ€œä½ å¯è¦åƒæ–‹å¦ï¼Ÿâ€",
      "ä¸‰è—ç­”é“ï¼šâ€œæ–‹æˆ’ä¸ºæœ¬ã€‚â€",
      "å…«æˆ’é“ï¼šâ€œå¸ˆçˆ¶ï¼Œå¤©è‰²æ™šäº†ï¼Œå‰é¢æœ‰ä¸ªæ‘å­ï¼Œä¸å¦‚å€Ÿå®¿ä¸€å®¿ã€‚â€",
      "ä¸‰è—é“ï¼šâ€œä¹Ÿå¥½ã€‚â€",
      "äºæ˜¯å¸ˆå¾’å››äººè¿›æ‘å€Ÿå®¿ã€‚",
      "æ‘äººè§ä»–ä»¬æ˜¯åƒ§äººï¼Œæ¬£ç„¶æ¥å¾…ã€‚",
      "æ™šé¥­åï¼Œä¸‰è—é—®ï¼šâ€œæ‘ä¸­æœ‰å¯ºåº™å¦ï¼Ÿâ€",
      "æ‘äººç­”ï¼šâ€œæœ‰ä¸ªå°åº™ï¼Œç ´æ—§äº†ã€‚â€",
      "å…«æˆ’é“ï¼šâ€œç ´ä¹Ÿæ— å¦¨ï¼Œå¯é¿é£é›¨ã€‚â€",
      "å½“æ™šå¸ˆå¾’ä¾¿å®¿äºåº™ä¸­ã€‚"
    ];

    let currentSentenceIndex = 0;
    let knownChars = new Set();
    const clickState = {};
    const sentenceDiv = document.getElementById('sentence');
    const infoBox = document.getElementById('charInfo');
    const nextButton = document.getElementById('nextButton');
    const readSentenceBtn = document.getElementById('readSentenceBtn');
    const skipButton = document.getElementById('skipButton');
    const completionBox = document.getElementById('completion');

    function renderSentence() {
      sentenceDiv.innerHTML = '';
      knownChars.clear();
      const sentence = sentences[currentSentenceIndex];
      for (const char of sentence.replace(/[ï¼Œã€‚ï¼šâ€œâ€ï¼]/g, '')) {
        const span = document.createElement('span');
        span.className = 'char';
        span.textContent = char;
        span.setAttribute('draggable', 'true');
        span.setAttribute('data-char', char);
        span.addEventListener('dragstart', (e) => {
          e.dataTransfer.setData('text/plain', char);
        });
        span.addEventListener('click', () => handleCharClick(span, char));
        sentenceDiv.appendChild(span);
      }
    }

    function handleCharClick(span, ch) {
      if (!clickState[ch]) clickState[ch] = 0;
      clickState[ch]++;
      const count = clickState[ch];

      if (count === 1) {
        speakChar(ch);
      } else if (count === 2) {
        infoBox.innerHTML = `<div class='word-display'>æ‹¼éŸ³ï¼š${getPinyin(ch)}</div>`;
      } else if (count === 3) {
        speakText(`æ‹¼éŸ³æ˜¯${getPinyin(ch)}`);
      } else if (count === 4) {
        window.open(`https://zi.tools/zi/${ch}`, '_blank');
      }
    }

    function getPinyin(char) {
      const fakeDict = {
        'é£': 'fÄ“ng', 'èŠ±': 'huÄ', 'é©¬': 'mÇ', 'é±¼': 'yÃº', 'å…‰': 'guÄng', 'é¸Ÿ': 'niÇo',
        'é‚£': 'nÃ ', 'é•¿': 'chÃ¡ng', 'è€': 'lÇo', 'ä¸': 'yÇ”', 'å…«': 'bÄ', 'æˆ’': 'jiÃ¨',
        'æŒ‘': 'tiÄo', 'ç€': 'zhe', 'è¡Œ': 'xÃ­ng', 'æ': 'lÇ', 'ç‰µ': 'qiÄn', 'æ…¢': 'mÃ n', 'èµ°': 'zÇ’u'
      };
      return fakeDict[char] || 'æ‹¼éŸ³';
    }

    function speakChar(char) {
      const utter = new SpeechSynthesisUtterance(char);
      utter.lang = 'zh-CN';
      utter.rate = 0.75;
      speechSynthesis.speak(utter);
    }

    function speakText(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'zh-CN';
      utter.rate = 0.75;
      speechSynthesis.speak(utter);
    }

    function allowDrop(e) {
      e.preventDefault();
    }

    function drop(e, type) {
      e.preventDefault();
      const char = e.dataTransfer.getData('text');
      if (knownChars.has(char)) return;
      knownChars.add(char);

      const el = document.createElement('div');
      el.textContent = char;
      el.style.fontSize = '20px';
      el.style.padding = '5px';
      el.style.cursor = 'default';
      el.style.pointerEvents = 'none';
      e.target.appendChild(el);

      const allChars = document.querySelectorAll('.char');
      allChars.forEach(span => {
        if (span.textContent === char) {
          span.classList.add('known');
          span.draggable = false;
        }
      });

      const total = knownChars.size;
      if (total >= 10) {
        const reward = document.getElementById('feedback');
        reward.innerHTML = 'ğŸ‰ åˆ†ç±»æ­£ç¡®ï¼Well done!';
        setTimeout(() => {
          reward.innerHTML = '';
          currentSentenceIndex++;
          if (currentSentenceIndex < sentences.length) {
            renderSentence();
          } else {
            sentenceDiv.innerHTML = '';
            completionBox.style.display = 'block';
          }
        }, 1000);
      }
    }

    nextButton.addEventListener('click', () => {
      if (currentSentenceIndex < sentences.length - 1) {
        currentSentenceIndex++;
        renderSentence();
      } else {
        sentenceDiv.innerHTML = '';
        completionBox.style.display = 'block';
      }
    });

    skipButton.addEventListener('click', () => {
      if (currentSentenceIndex < sentences.length - 1) {
        currentSentenceIndex++;
        renderSentence();
      } else {
        sentenceDiv.innerHTML = '';
        completionBox.style.display = 'block';
      }
    });

    readSentenceBtn.addEventListener('click', () => {
      const text = sentences[currentSentenceIndex];
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'zh-CN';
      utter.rate = 0.75;
      speechSynthesis.speak(utter);
    });

    renderSentence();
  </script>
</body>
</html>
