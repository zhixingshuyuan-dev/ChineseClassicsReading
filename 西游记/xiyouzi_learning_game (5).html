<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>è¥¿æ¸¸æ±‰å­—æ¢ç§˜</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .sentence {
      margin-bottom: 10px;
      font-size: 48px;
    }
    .char {
      display: inline-block;
      margin: 5px;
      padding: 10px;
      border: 1px solid #ccc;
      cursor: pointer;
      user-select: none;
    }
    .char.known {
      background-color: #eee;
      color: #888;
      pointer-events: none;
    }
    .box {
      width: 200px;
      min-height: 100px;
      border: 2px dashed #666;
      margin: 10px;
      padding: 10px;
      display: inline-block;
      vertical-align: top;
      overflow-y: auto;
      max-height: 300px;
    }
    .box h3, .box h4 {
      margin: 0 0 10px 0;
    }
    #structure-container {
      display: flex;
      gap: 20px;
    }
    #structure-container .box {
      width: 600px;
    }
    #structure-container img {
      width: 100px;
      height: auto;
      margin-bottom: 5px;
    }
    #feedback {
      margin-top: 20px;
      font-size: 18px;
      color: green;
    }
    .info {
      margin-top: 10px;
      font-size: 18px;
      color: #333;
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
    }
    .word-display {
      font-size: 20px;
    }
    .phrase-display {
      font-size: 72px;
      line-height: 2.2;
    }
    #nextButton, #skipButton {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
    }
    .completion {
      background-color: #e0ffe0;
      padding: 20px;
      border: 2px solid #00aa00;
      border-radius: 10px;
      font-size: 24px;
      margin-top: 30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>è¥¿æ¸¸æ±‰å­—æ¢ç§˜ï¼šé—¯å…³å­¦æ±‰å­—</h1>
  <p>å¤šæ¬¡ç‚¹å‡»åŸæ–‡æ±‰å­—ï¼Œæœ‰æƒŠå–œï¼Click characters multiple times to discover surprises!</p>

  <div class="sentence" id="sentence"></div>
  <button id="readSentenceBtn">ğŸ”Š æœ—è¯»æ•´å¥</button>
  <button id="nextButton">ä¸‹ä¸€å¥</button>
  <button id="skipButton">è·³è¿‡æ­¤å¥</button>
  <div class="info" id="charInfo"></div>

  <div id="feedback"></div>
  <div id="completion" class="completion" style="display: none;">ğŸ‰ æ­å–œä½ ï¼Œå®Œæˆæ‰€æœ‰å¥å­ï¼Congratulations, you've finished all the sentences!</div>

  <script>
    const sentences = [
      "é‚£å¤ªç™½é‡‘æ˜Ÿä¸ç¾çŒ´ç‹åŒå‡ºäº†æ´å¤©æ·±å¤„ï¼Œä¸€é½é©¾äº‘è€Œèµ·ã€‚",
      "åŸæ¥æ‚Ÿç©ºæ–¤æ–—äº‘æ¯”ä¼—ä¸åŒï¼Œååˆ†å¿«ç–¾ï¼ŒæŠŠä¸ªé‡‘æ˜Ÿæ’‡åœ¨è„‘åï¼Œå…ˆè‡³å—å¤©é—¨å¤–ã€‚",
      "æ­£æ¬²æ”¶äº‘å‰è¿›ï¼Œè¢«å¢é•¿å¤©ç‹é¢†è‘—åºã€åˆ˜ã€è‹Ÿã€æ¯•ã€é‚“ã€è¾›ã€å¼ ã€é™¶ä¸€è·¯å¤§åŠ›å¤©ä¸ï¼Œæªåˆ€å‰‘æˆŸï¼ŒæŒ¡ä½å¤©é—¨ï¼Œä¸è‚¯æ”¾è¿›ã€‚",
      "çŒ´ç‹é“ï¼šè¿™ä¸ªé‡‘æ˜Ÿè€å„¿ä¹ƒå¥¸è¯ˆä¹‹å¾’ï¼Œæ—¢è¯·è€å­™ï¼Œå¦‚ä½•æ•™äººåŠ¨åˆ€åŠ¨æªï¼Œé˜»å¡é—¨è·¯ï¼Ÿ",
      "æ­£åš·é—´ï¼Œé‡‘æ˜Ÿå€åˆ°ã€‚",
      "æ‚Ÿç©ºå°±è§Œé¢å‘ç‹ é“ï¼šä½ è¿™è€å„¿ï¼Œæ€ä¹ˆå“„æˆ‘ï¼Ÿè¢«ä½ è¯´å¥‰ç‰å¸æ‹›å®‰æ—¨æ„æ¥è¯·ï¼Œå´æ€ä¹ˆæ•™è¿™äº›äººé˜»ä½å¤©é—¨ï¼Œä¸æ”¾è€å­™è¿›å»ï¼Ÿ",
      "é‡‘æ˜Ÿç¬‘é“ï¼šå¤§ç‹æ¯æ€’ã€‚ä½ è‡ªæ¥æœªæ›¾åˆ°æ­¤å¤©å ‚ï¼Œå´åˆæ— åï¼Œä¼—å¤©ä¸åˆä¸ä½ ç´ ä¸ç›¸è¯†ï¼Œä»–æ€è‚¯æ”¾ä½ æ“…å…¥ï¼Ÿ",
      "ç­‰å¦‚ä»Šè§äº†å¤©å°Šï¼Œæˆäº†ä»™ç®“ï¼Œæ³¨äº†å®˜åï¼Œå‘åéšä½ å‡ºå…¥ï¼Œè°å¤æŒ¡ä¹Ÿï¼Ÿ",
      "æ‚Ÿç©ºé“ï¼šè¿™ç­‰è¯´ï¼Œä¹Ÿç½¢ï¼Œæˆ‘ä¸è¿›å»äº†ã€‚",
      "é‡‘æ˜Ÿåˆç”¨æ‰‹æ‰¯ä½é“ï¼šä½ è¿˜åŒæˆ‘è¿›å»ã€‚",
      "å°†è¿‘å¤©é—¨ï¼Œé‡‘æ˜Ÿé«˜å«é“ï¼šé‚£å¤©é—¨å¤©å°†ã€å¤§å°åå…µï¼Œæ”¾å¼€è·¯è€…ã€‚",
      "æ­¤ä¹ƒä¸‹ç•Œä»™äººï¼Œæˆ‘å¥‰ç‰å¸åœ£æ—¨ï¼Œå®£ä»–æ¥ä¹Ÿã€‚",
      "é‚£å¢é•¿å¤©ç‹ä¸ä¼—å¤©ä¸ä¿±æ‰æ•›å…µé€€é¿ã€‚",
      "çŒ´ç‹å§‹ä¿¡å…¶è¨€ï¼ŒåŒé‡‘æ˜Ÿç¼“æ­¥å…¥é‡Œè§‚çœ‹ã€‚"
    ];

    let currentSentenceIndex = 0;
    let knownChars = new Set();
    let clickState = {};
    const sentenceDiv = document.getElementById('sentence');
    const infoBox = document.getElementById('charInfo');
    const nextButton = document.getElementById('nextButton');
    const readSentenceBtn = document.getElementById('readSentenceBtn');
    const skipButton = document.getElementById('skipButton');
    const completionBox = document.getElementById('completion');

    function renderSentence() {
      sentenceDiv.innerHTML = '';
      knownChars.clear();
      clickState = {}; // æ¸…é™¤å‰ä¸€å¥çš„ç‚¹å‡»çŠ¶æ€
      const sentence = sentences[currentSentenceIndex];
      for (const char of sentence.replace(/[ï¼Œã€‚ï¼šâ€œâ€ï¼ã€ï¼Ÿ]/g, '')) {
        const span = document.createElement('span');
        span.className = 'char';
        span.textContent = char;
        span.setAttribute('data-char', char);
        span.addEventListener('click', () => handleCharClick(span, char));
        sentenceDiv.appendChild(span);
      }
    }

    function handleCharClick(span, ch) {
      if (span.classList.contains('known')) return;
      if (!clickState[ch]) clickState[ch] = 0;
      clickState[ch]++;
      const count = clickState[ch];

      if (count === 1) {
        speakChar(ch);
      } else if (count === 2) {
        infoBox.innerHTML = `<div class='word-display'>æ‹¼éŸ³ï¼š${getPinyin(ch)}</div>`;
      } else if (count === 3) {
        infoBox.innerHTML += `<div class='word-display'>å¸¸è§è¯ï¼š${getWord(ch)}</div>`;
      } else if (count === 4) {
        infoBox.innerHTML += `<div class='word-display'>ä¾‹å¥ï¼š${getExample(ch)}</div>`;
        span.classList.add('known');
      }
    }

    function getPinyin(char) {
      const fakeDict = { 'å­™': 'sÅ«n', 'æ‚Ÿ': 'wÃ¹', 'ç©º': 'kÅng', 'çŒ´': 'hÃ³u', 'ç‹': 'wÃ¡ng', 'å¤©': 'tiÄn', 'é—¨': 'mÃ©n', 'é‡‘': 'jÄ«n', 'æ˜Ÿ': 'xÄ«ng', 'äº‘': 'yÃºn', 'å…µ': 'bÄ«ng' };
      return fakeDict[char] || 'æ‹¼éŸ³';
    }

    function getWord(char) {
      const wordDict = { 'æ‚Ÿ': 'æ‚Ÿç©º', 'é—¨': 'å¤©é—¨', 'æ˜Ÿ': 'é‡‘æ˜Ÿ', 'çŒ´': 'çŒ´ç‹', 'å…µ': 'å£«å…µ' };
      return wordDict[char] || 'è¯è¯­';
    }

    function getExample(char) {
      const exampleDict = { 'æ‚Ÿ': 'æ‚Ÿç©ºæ˜¯èŠ±æœå±±ç¾çŒ´ç‹ã€‚', 'é—¨': 'ä»–ç«™åœ¨å—å¤©é—¨å¤–ã€‚', 'æ˜Ÿ': 'å¤ªç™½é‡‘æ˜Ÿå¥‰å‘½æ¥è¯·ã€‚', 'çŒ´': 'çŒ´ç‹å¤§é—¹å¤©å®«ã€‚', 'å…µ': 'å¤©å…µå¤©å°†æ’æˆé˜µã€‚' };
      return exampleDict[char] || 'ä¾‹å¥';
    }

    function speakChar(char) {
      const utter = new SpeechSynthesisUtterance(char);
      utter.lang = 'zh-CN';
      utter.rate = 0.75;
      speechSynthesis.speak(utter);
    }

    nextButton.addEventListener('click', () => {
      if (currentSentenceIndex < sentences.length - 1) {
        currentSentenceIndex++;
        renderSentence();
      } else {
        sentenceDiv.innerHTML = '';
        completionBox.style.display = 'block';
      }
    });

    skipButton.addEventListener('click', () => {
      if (currentSentenceIndex < sentences.length - 1) {
        currentSentenceIndex++;
        renderSentence();
      } else {
        sentenceDiv.innerHTML = '';
        completionBox.style.display = 'block';
      }
    });

    readSentenceBtn.addEventListener('click', () => {
      const text = sentences[currentSentenceIndex];
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'zh-CN';
      utter.rate = 0.75;
      speechSynthesis.speak(utter);
    });

    renderSentence();
  </script>
</body>
</html>
