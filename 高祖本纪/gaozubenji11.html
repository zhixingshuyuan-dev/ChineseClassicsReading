<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>史记·高祖本纪 - 深色版</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.8;
    font-size: 1.8em;
    background-color: #222;
    color: #ddd;
    padding: 20px;
  }
  .text { 
    max-width: 900px; 
    margin: 0 auto;
    padding: 20px;
    background-color: #333;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }
  .annotation-btn {
    display: inline-block;
    background: #444;
    border: 1px solid #666;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.6em;
    color: #55aaff;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  /* 弹窗样式 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: #444;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    position: absolute;
    font-size: 0.7em;
    line-height: 1.6;
    color: #eee;
    border: 1px solid #666;
    cursor: move;
  }
  #popup-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #55aaff;
    border-bottom: 1px solid #666;
    padding-bottom: 5px;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #ddd;
  }
  h1 {
    text-align: center;
    color: #f8f8f8;
    margin-bottom: 30px;
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
  }
  ruby {
    ruby-position: under;
  }
  rt {
    font-size: 0.5em;
    color: #aaa;
  }
</style>
</head>
<body>
<div class="text">
<h1>卷八 高祖本纪第八</h1>

<p>三年，魏王豹谒归视亲疾，至即绝河津，反为楚。汉王使郦生说豹，豹不听。汉王遣将军韩信击，大破之，虏豹。遂定魏地，置三郡，曰河东、<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="今蒲州也。">【正义】</span>
</span>太愿、<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="今并州。">【正义】</span>
</span>上党。<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="今潞州。">【正义】</span>
</span>汉王乃令张耳与韩信遂东下井陉击赵，斩陈馀、赵王歇。其明年，立张耳为赵王。</p>

<p>汉王军荥阳南，筑甬道<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="甬音勇。韦昭云：「起土筑墙，中间为道。」应劭云：「恐敌抄辎重，故筑垣墙如街巷。」">【正义】</span>
</span>属之河，以取敖仓。<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="孟康云：「敖，地名，在荥阳西北，山上临河有大仓。」太康地理志云：「秦建敖仓于成皋。」">【正义】</span>
</span>与项羽相距岁馀。项羽数侵夺汉甬道，汉军乏食，遂围汉王。汉王请和，割荥阳以西者为汉。项王不听。汉王患之，乃用陈平之计，予陈平金四万斤，以间疏楚君臣。于是项羽乃疑亚父。亚父是时劝项羽遂下荥阳，及其见疑，乃怒，辞老，愿赐骸骨归卒伍，未至彭城而死。</p>

<p>汉军绝食，乃夜出女子东门二千馀人，被甲，楚因四面击之。将军纪信乃乘王驾，诈为汉王，诳楚，楚皆呼万岁，之城东观，以故汉王得与数十骑出西门遁。令御史大夫周苛、魏豹、枞公守荥阳。诸将卒不能从者，尽在城中。周苛、枞公相谓曰：「反国之王，难与守城。」因杀魏豹。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「案月表，三年七月，王出荥阳。八月，杀魏豹。而又云四年三月，周苛死。四月，魏豹死。二者不同。项羽杀纪信、周苛、枞公，皆是三年中。」">【集解】</span>
</span></p>

<p>汉王之出荥阳入关，收兵欲复东。袁生说汉王曰：「汉与楚相距荥阳数岁，汉常困。愿君王出武关，项羽必引兵南走，王深壁，令荥阳成皋间且得休。使韩信等辑河北赵地，连燕齐，君王乃复走荥阳，未晚也。如此，则楚所备者多，力分，汉得休，复与之战，破楚必矣。」汉王从其计，出军宛叶间，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="宛，于元反。叶，式涉反。宛，邓州县也。叶，汝州县。水经注云：「本楚惠王封诸梁子兼，号曰叶城，即子高之故邑也。」">【正义】</span>
</span>与黥布行收兵。</p>

<p>项羽闻汉王在宛，果引兵南。汉王坚壁不与战。是时彭越渡睢水，与项声、薛公战下邳，彭越大破楚军。项羽乃引兵东击彭越。汉王亦引兵北军成皋。项羽已破走彭越，闻汉王复军成皋，乃复引兵西，拔荥阳，诛周苛、枞公，而虏韩王信，遂围成皋。</p>

<p>汉王跳，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「音逃。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="如淳曰：「跳，走也。」晋灼按：刘泽传「跳驱至长安」。说文音徒调反。通俗文云「超通为跳」。">【索隐】</span>
</span>独与滕公<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="夏侯婴为滕令，故曰滕公也。">【索隐】</span>
</span>共车出成皋玉门，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「项羽纪云北门名玉门。」">【集解】</span>
</span>北渡河，驰宿脩武。自称使者，晨驰入张耳、韩信壁，而夺之军。乃使张耳北益收兵赵地，使韩信东击齐。汉王得韩信军，则复振。引兵临河，南飨军小脩武南，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="晋灼曰：「在大脩武城东。」">【集解】</span>
</span>欲复战。郎中郑忠乃说止汉王，使高垒深堑，勿与战。汉王听其计，使卢绾、<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="苏林曰：「绾音以绳绾结物之『绾』。」">【集解】</span>
</span>刘贾将卒二万人，骑数百，渡白马津，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="即黎阳津也。南界东郡白马县。">【索隐】</span>
</span>入楚地，与彭越复击破楚军燕郭西，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="故南燕国也。在东郡，秦以为县。">【索隐】</span>
</span>遂复下梁地十馀城。</p>

<p>淮阴已受命东，未渡平愿。汉王使郦生往说齐王田广，广叛楚，与汉和，共击项羽。韩信用蒯通计，遂袭破齐。齐王烹郦生，东走高密。项羽闻韩信已举河北兵破齐、赵，且欲击楚，则使龙且、周兰<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「一作『简』。」">【集解】</span>
</span>往击之。韩信与战，骑将灌婴击，大破楚军，杀龙且。齐王广饹彭越。当此时，彭越将兵居梁地，往来苦楚兵，绝其粮食。</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-title"></div>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  // 拖拽功能变量
  let isDragging = false;
  let offsetX, offsetY;

  // 开始拖拽
  popup.addEventListener('mousedown', (e) => {
    if (e.target === closeBtn) return;
    isDragging = true;
    offsetX = e.clientX - popup.getBoundingClientRect().left;
    offsetY = e.clientY - popup.getBoundingClientRect().top;
    popup.style.cursor = 'grabbing';
  });

  // 拖拽中
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    popup.style.left = (e.clientX - offsetX) + 'px';
    popup.style.top = (e.clientY - offsetY) + 'px';
    popup.style.transform = 'none'; // 移除居中定位
  });

  // 结束拖拽
  document.addEventListener('mouseup', () => {
    isDragging = false;
    popup.style.cursor = 'move';
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = type;
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      
      // 显示弹窗
      overlay.style.display = 'flex';
      
      // 初始居中定位
      popup.style.left = '50%';
      popup.style.top = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      
      e.stopPropagation();
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>