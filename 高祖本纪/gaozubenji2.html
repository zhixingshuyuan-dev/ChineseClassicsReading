<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>史记·高祖本纪 - 深色版</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.8;
    font-size: 1.8em;
    background-color: #222;
    color: #ddd;
    padding: 20px;
  }
  .text { 
    max-width: 900px; 
    margin: 0 auto;
    padding: 20px;
    background-color: #333;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }
  .annotation-btn {
    display: inline-block;
    background: #444;
    border: 1px solid #666;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.6em;
    color: #55aaff;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  /* 弹窗样式 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: #444;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    position: absolute;
    font-size: 0.7em;
    line-height: 1.6;
    color: #eee;
    border: 1px solid #666;
    cursor: move;
  }
  #popup-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #55aaff;
    border-bottom: 1px solid #666;
    padding-bottom: 5px;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #ddd;
  }
  h1 {
    text-align: center;
    color: #f8f8f8;
    margin-bottom: 30px;
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
  }
  ruby {
    ruby-position: under;
  }
  rt {
    font-size: 0.5em;
    color: #aaa;
  }
</style>
</head>
<body>
<div class="text">
<h1>卷八 高祖本纪第八</h1>

<p>高祖为亭长时，常告归之田。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="服虔曰：「告音如『嗥呼』之『嗥』。」李斐曰：「休谒之名也。吉曰告，凶曰宁。」孟康曰：「古者名吏休假曰告。告又音喾。汉律，吏二千石有予告、赐告。予告者，在官有功最，法所当得者也。赐告者，病满三月当免，天子优赐，复其告，使得带印绂，将官属，归家治疾也。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「告，请归乞假也。音『告语』之『告』。故战国策曰『商君告归』，延笃以为告归，今之归宁也。」刘伯庄、颜师古并音古笃反，非号喾两音也。按：东观汉记田邑传云「邑年三十，历卿大夫，号归罢，厌事，少所嗜欲」。寻号与嗥同，古者当有此语，故服氏云「如号呼之号」，音豪。今以服虔虽据田邑「号归」，亦恐未得。然此「告」字当音诰，诰号声相近，故后「告归」「号归」遂变耳。">【索隐】</span>
</span>吕后与两子居田中耨，有一老父过请饮，吕后因餔<ruby>之<rt>bǔ</rt></ruby>。<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="必捕反，以食饲人也。父本请饮，吕后因饲之。国语云：「国中童子无不餔。」">【正义】</span>
</span>老父相吕后曰：「夫人天下贵人。」令相两子，见孝惠，曰：「夫人所以贵者，乃此男也。」相鲁元，亦皆贵。老父已去，高祖适从旁舍来，吕后具言客有过，相我子母皆大贵。高祖问，曰：「未远。」乃追及，问老父。老父曰：「乡者夫人婴儿皆似君，君相贵不可言。」高祖乃谢曰：「诚如父言，不敢忘德。」及高祖贵，遂不知老父处。</p>

<p>高祖为亭长，乃以竹皮为冠，令求盗之薛治之，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="应劭曰：「以竹始生皮作冠，今鹊尾冠是也。求盗者，旧时亭有两卒，其一为亭父，掌开闭埽除，一为求盗，掌逐捕盗贼。薛，鲁国县也。有作冠师，故往治之。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="应劭云：「一名『长冠』。侧竹皮裹以纵前，高七寸，广三寸，如板。」又蔡邕独断云：「长冠，楚制也。高祖以竹皮为之，谓之『刘氏冠』。」司马彪舆服志亦以「刘氏冠」为鹊尾冠也。应劭云：「旧亭卒名『弩父』，陈、楚谓之『亭父』，或云『亭部』，淮、泗谓之『求盗』也。」">【索隐】</span>
</span>时时冠<ruby>之<rt>guàn</rt></ruby>，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="音馆，下同。">【正义】</span>
</span>及贵常冠，所谓「刘氏冠」<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="音官。颜师古云：「后号为『刘氏冠』。其后诏曰『爵非公乘以上下得冠刘氏冠』，即此也。」">【正义】</span>
</span>乃是也。</p>

<p>高祖以亭长为县送徒郦山，徒多道亡。自度<ruby>比<rt>bì</rt></ruby>至皆亡之，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="度，田洛反。比，必寐反。">【正义】</span>
</span>到丰西泽中，止饮，夜乃解纵所送徒。曰：「公等皆去，吾亦从此逝矣！」徒中壮士愿从者十馀人。高祖被酒，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="被，加也。">【正义】</span>
</span>夜径<ruby>泽<rt>zé</rt></ruby>中，令一人行前。<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="行音下孟反。">【正义】</span>
  <span class="annotation-btn" data-type="索隐" data-content="旧音经。按：广雅云「径，斜过也」。字林云「径，小道也，音古定反」。言酒后放徒，夜径行泽中，不敢由正路，且从而求疾也。">【索隐】</span>
</span>行前者还报曰：「前有大蛇当径，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="音径。郑玄曰：「步道曰径也。」">【索隐】</span>
</span>愿还。」高祖醉，曰：「壮士行，何畏！」乃前，拔剑击斩蛇。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="汉旧仪云「斩蛇剑长七尺」。又高祖云「吾以布衣提三尺剑取天下」。二文不同者，崔豹古今注「当高祖为亭长，理应提三尺剑耳；及贵，当别得七尺宝剑」，故旧仪因言之。">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="按：其蛇大，理须别求是剑斩之。三尺剑者，常佩之剑。括地志云：「斩蛇沟源出徐州丰县中平地，故老云高祖斩蛇处，至县西十五里入泡水也。」">【正义】</span>
</span>蛇遂分为两，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="谓斩蛇分为两段也。">【索隐】</span>
</span>径开。行数里，醉，因卧。后人来至蛇所，有一老妪夜哭。人问何哭，妪曰：「人杀吾子，故哭之。」人曰：「妪子何为见杀？」妪曰：「吾，白帝子也，化为蛇，当道，今为赤帝子斩之，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="应劭曰：「秦襄公自以居西戎，主少昊之神，作西畤，祠白帝。至献公时栎阳雨金，以为瑞，又作畦畤，祠白帝。少昊，金德也。赤帝尧后，谓汉也。杀之者，明汉当灭秦也。秦自谓水，汉初自谓土，皆失之。至光武乃改定。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="按：太康地理志云「畤在栎阳故城内。其畤如畦，故曰畦畤」。畦音户圭反。应注云「秦自谓水」者，按秦文公获黑龙，命河为德水是也。又按：春秋合诚图云「水神哭，子褒败」。宋均以为高祖斩白蛇而神母哭，则此母水精也。此皆谬说。又注云「至光武乃改」者，谓改汉为火德，秦为金德，与雨金及赤帝子之理合也。故哭。」">【索隐】</span>
</span>人乃以妪为不诚，欲告之，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「一作『苦』。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="汉书作「苦」，谓欲困苦辱之。一本或作「笞」。说文云：「笞，击也。」妪因忽不见。后人至，高祖觉。">【索隐】</span>
</span>后人告高祖，高祖乃心独喜，自负。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="应劭曰：「负，恃也。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="晋灼云：「自恃斩蛇事。」">【索隐】</span>
</span>诸从者日益畏之。</p>

<p>秦始皇帝常曰「东南有天子气」，于是因东游以厌<ruby>之<rt>yā</rt></ruby>。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="厌音一涉反，又一冉反。广雅云：「厌，镇也。」">【索隐】</span>
</span>高祖即自疑，亡匿，隐于芒、砀山泽岩石之间。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="徐广曰：「芒，今临淮县也。砀县在梁。」骃案：应劭曰「二县之界有山泽之固，故隐于其间也」。">【集解】</span>
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「宋州砀山县在州东一百五十里，本汉砀县也。砀山在县东。」">【正义】</span>
</span>吕后与人俱求，常得之。高祖怪问之。吕后曰：「季所居上常有云气，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="京房易候云：「何以知贤人隐？师曰：『四方常有大云，五色具而不雨，其下有贤人隐矣。』」">【正义】</span>
</span>故吕后望云气而得之。故从往常得季。」高祖心喜。沛中子弟或闻之，多欲附者矣。</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-title"></div>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  // 拖拽功能变量
  let isDragging = false;
  let offsetX, offsetY;

  // 开始拖拽
  popup.addEventListener('mousedown', (e) => {
    if (e.target === closeBtn) return;
    isDragging = true;
    offsetX = e.clientX - popup.getBoundingClientRect().left;
    offsetY = e.clientY - popup.getBoundingClientRect().top;
    popup.style.cursor = 'grabbing';
  });

  // 拖拽中
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    popup.style.left = (e.clientX - offsetX) + 'px';
    popup.style.top = (e.clientY - offsetY) + 'px';
    popup.style.transform = 'none'; // 移除居中定位
  });

  // 结束拖拽
  document.addEventListener('mouseup', () => {
    isDragging = false;
    popup.style.cursor = 'move';
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = type;
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      
      // 显示弹窗
      overlay.style.display = 'flex';
      
      // 初始居中定位
      popup.style.left = '50%';
      popup.style.top = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      
      e.stopPropagation();
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>