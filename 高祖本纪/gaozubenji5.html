<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>史记选段 - 放大正文版</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.6;
    font-size: 2em; /* 正文字体放大一倍 */
  }
  .text { 
    max-width: 900px; 
    margin: 20px auto;
    padding: 20px;
  }
  .annotation-btn {
    display: inline-block;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.5em; /* 注解按键字号保持不变（相对于放大后的正文） */
    color: #0077cc;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  /* 弹窗样式 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: white;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.25);
    position: relative;
    font-size: 0.7em;
    line-height: 1.4;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #333;
  }
</style>
</head>
<body>
<div class="text">

<p>从项梁月馀，项羽已拔襄城<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「颖川县。」">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="襄城，许州县。">【正义】</span>
</span>还。项梁尽召别将居薛。闻陈王定死，因立楚后怀王孙心为楚王，治盱台。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「临淮县。音吁夷。」">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="楚县也。">【正义】</span>
</span>项梁号武信君。居数月，北攻亢父，救东阿，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「东郡之县名。」">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="济州县也。">【正义】</span>
</span>破秦军。齐军归，楚独追北，<span class="annotation-btn" data-type="集解" data-content="服虔曰：「师败曰北。」">【集解】</span>使沛公、项羽别攻城阳，屠之。<span class="annotation-btn" data-type="索隐" data-content="按地理志属济阴。">【索隐】</span>军濮阳之东，<span class="annotation-btn" data-type="正义" data-content="濮阳故城在濮州西八十六里，本汉濮阳县。">【正义】</span>与秦军战，破之。</p>

<p>秦军复振，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="李奇曰：「振，整也。」">【集解】</span>
  <span class="annotation-btn" data-type="集解" data-content="如淳曰：「振，起也。收败卒自振迅而复起也。」">【集解】</span>
</span>守濮阳，环水。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="文颖曰：「决水以自环守为固也。」">【集解】</span>
  <span class="annotation-btn" data-type="集解" data-content="张晏曰：「依河水以自环绕作垒。」">【集解】</span>
  <span class="annotation-btn" data-type="正义" data-content="按：二说皆通。其濮阳县北临黄河，言秦军北阻黄河，南凿沟引黄河水环绕作壁垒为固，楚军乃去。">【正义】</span>
</span>楚军去而攻定陶，<span class="annotation-btn" data-type="索隐" data-content="《地理志》云：「济阴之县也」">【索隐】</span>定陶未下。沛公与项羽西略地至雍丘之下，<span class="annotation-btn" data-type="索隐" data-content="韦昭云：「故杞国，今陈留县。」">【索隐】</span>与秦军战，大破之，斩李由。还攻外黄，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「上陈留县。」">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="在雍丘东。">【正义】</span>
</span>外黄未下。</p>

<p>项梁再破秦军，有骄色。宋义谏，不听。<span class="annotation-btn" data-type="索隐" data-content="荀悦汉纪云「故楚令尹宋义」，当别有所出。">【索隐】</span>秦益章邯兵，夜衔枚击项梁，<span class="annotation-btn" data-type="集解" data-content="骃案：周礼有衔枚氏。郑玄曰：「衔枚，止言语嚣欢也。枚状如箸，横衔之，繣结于项者」。繣音获。」">【集解】</span>大破之定陶，项梁死。沛公与项羽方攻陈留，闻项梁死，引兵与吕将军俱东。吕臣军彭城东，项羽军彭城西，沛公军砀。</p>

<p>章邯已破项梁军，则以为楚地兵不足忧，乃渡河，北击赵，大破之。当是之时，赵歇为王，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="苏林音如字。郑德音「遏绝」之「遏」。徐广音乌辖反。今依字读。">【索隐】</span>
</span>秦将王离围之钜鹿城，此所谓河北之军也。</p>

<p>秦二世三年，楚怀王见项梁军破，恐，徙盱台都彭城，并吕臣、项羽军自将之。以沛公为砀郡长，<span class="annotation-group">
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「宋州本秦砀郡。」">【正义】</span>
  <span class="annotation-btn" data-type="正义" data-content="苏林云：「长如郡守。」韦昭云：「秦名曰守，是时改曰长。」">【正义】</span>
</span>封为武安侯，将砀郡兵。封项羽为长安侯，号为鲁公。吕臣为司徒，其父吕青为令尹。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="按表，青封信阳侯。">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="应劭云：「天子曰师尹，诸侯曰令尹。时去六国近，故置令尹。」臣瓒曰：「诸侯之卿，唯楚称令尹，其馀国不称。时立楚之后，故置官司皆如楚旧也。」">【正义】</span>
</span></p>

<p>赵数请救，怀王乃以宋义为上将军，项羽为次将，范增为末将，北救赵。令沛公西略地入关。与诸将约，先入定关中者王之。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「函谷、武关也。」">【索隐】</span>
  <span class="annotation-btn" data-type="索隐" data-content="又三辅旧事云：「西以散关为界，东以函谷为界，二关之中谓之关中。」">【索隐】</span>
</span></p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const content = btn.getAttribute('data-content');
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      overlay.style.display = 'flex';
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>