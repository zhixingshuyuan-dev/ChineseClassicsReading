<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>史记-高祖本纪 第八节</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.6;
    font-size: 2em; /* 正文字体放大一倍 */
    background-color: #f5f5f5;
    color: #333;
  }
  .text { 
    max-width: 900px; 
    margin: 20px auto;
    padding: 20px;
    background-color: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .annotation-btn {
    display: inline-block;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px;
    cursor: pointer;
    font-size: 0.5em;
    color: #0077cc;
    vertical-align: middle;
  }
  .annotation-group {
    display: inline-flex;
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  /* 弹窗样式 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #popup {
    background: white;
    max-width: 700px;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.25);
    position: relative;
    font-size: 0.7em;
    line-height: 1.4;
  }
  #popup-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #0077cc;
  }
  #popup .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #333;
  }
</style>
</head>
<body>
<div class="text">

<p>正月，<span class="annotation-btn" data-type="正义" data-content="崔浩云：「史官以正月纪四时，故书正月也。」荀悦云：「先春后正月也。」颜师古云：「凡此诸月号，皆太初正历之后记事者追改之，非当时本称也。以十月为岁首，即以十月为正月。今此正月，当时谓之四月也。他皆放此。」">【正义】</span>项羽自立为西楚霸王，王梁、楚地九郡，都彭城。负约，更立沛公为汉王，<span class="annotation-btn" data-type="正义" data-content="梁州本汉中郡，以汉水为名。">【正义】</span>王巴、蜀、汉中，<span class="annotation-btn" data-type="集解" data-content="徐广曰：「三十二县。」">【集解】</span>都南郑。三分关中，立秦三将：章邯为雍王，<span class="annotation-btn" data-type="正义" data-content="以岐州雍县为名。">【正义】</span>都废丘；司马欣为塞王，<span class="annotation-btn" data-type="正义" data-content="塞，先代反。韦昭云：「在长安东，名桃林塞。」按：桃林塞今华州潼关也。颜师古云「取河华之固为厄塞耳，非桃林」。">【正义】</span>都栎阳；<span class="annotation-btn" data-type="索隐" data-content="因葬太上皇，改曰万年。">【索隐】</span>董翳为翟王，<span class="annotation-btn" data-type="正义" data-content="文颖云：「本上郡，秦所置，项羽以董翳为王，更名曰翟也。」">【正义】</span>都高奴。楚将瑕丘申阳为河南王，<span class="annotation-btn" data-type="正义" data-content="在黄河之南，故曰河南，即今河南府。">【正义】</span>都洛阳。赵将司马卬为殷王，<span class="annotation-btn" data-type="正义" data-content="以商帝盘庚国殷中之地，改商为殷，在相州安阳县，即北蒙殷墟，南去朝歌百三十六里，故号殷王，都朝歌。">【正义】</span>都朝歌。赵王歇徙王代。赵相张耳为常山王，都襄国。当阳<span class="annotation-btn" data-type="索隐" data-content="韦昭云：「南郡县名。」">【索隐】</span>君黥布为九江王，都六。<span class="annotation-btn" data-type="索隐" data-content="地理志云六县属六安国。">【索隐】</span>怀王柱国共敖为临江王，<span class="annotation-btn" data-type="正义" data-content="孟康云「本南郡，改为临江国」是也。">【正义】</span>都江陵。番君吴芮为衡山王，都邾。<span class="annotation-btn" data-type="索隐" data-content="太康地理志云：「楚灭邾，迁其人于江南，因名县也。」">【索隐】</span>燕将臧荼为燕王，都蓟。故燕王韩广徙王辽东。广不听，臧荼攻杀之无终。封成安君陈馀河间三县，居南皮。封梅鋗十万户。</p>

<p>四月，兵罢戏下，<span class="annotation-btn" data-type="正义" data-content="戏音麾：许慎注淮南子云：「戏，大旗也。」">【正义】</span>诸侯各就国。汉王之国，项王使卒三万人从，楚与诸侯之慕从者数万人，从杜南<span class="annotation-btn" data-type="正义" data-content="韦昭云：「杜，今陵邑。」括地志云：「杜陵故城在雍州万年县东南十五里。汉杜陵县，宣帝陵邑也，北去宣帝陵五里。庙记云故杜伯国。」">【正义】</span>入蚀中。<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="李奇曰：「蚀音力，在杜南。」如淳曰：「蚀，入汉中道川谷名。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="李奇音力，孟康音食。王劭按：说文作「鋋」，器名也。地形似器，故名之。音力也。">【索隐】</span>
</span>去辄烧绝栈道，<span class="annotation-btn" data-type="索隐" data-content="按系家，是用张良计也。栈道，阁道也。音士谏反。包恺音士版反。崔浩云：「险绝之处，傍凿山岩，而施版梁为阁。」">【索隐】</span>以备诸侯盗兵袭之，亦示项羽无东意。至南郑，诸将及士卒多道亡归，士卒皆歌思东归。韩信说汉王曰：<span class="annotation-btn" data-type="集解" data-content="徐广曰：「韩王信，非淮阴侯信也。」">【集解】</span>「项羽王诸将之有功者，而王独居南郑，是迁也。<span class="annotation-btn" data-type="集解" data-content="韦昭曰：「若有罪见迁徙。」">【集解】</span>军吏士卒皆山东之人也，日夜跂而望归，<span class="annotation-btn" data-type="正义" data-content="跂音丘赐反。说文云：「跂，举踵也。」司马彪云：「跂，望也。」">【正义】</span>及其锋而用之，可以有大功。天下已定，人皆自宁，不可复用。不如决策东乡，争权天下。」</p>

<p>项羽出关，使人徙义帝。曰：「古之帝者地方千里，必居上游。」<span class="annotation-btn" data-type="正义" data-content="音流。">【正义】</span>乃使使徙义帝长沙郴县，趣义帝行，<span class="annotation-btn" data-type="正义" data-content="趣音促。">【正义】</span>群臣稍倍叛之，乃阴令衡山王、临江王击之，杀义帝江南。项羽怨田荣，立齐将田都为齐王。田荣怒，因自立为齐王，杀田都而反楚；予彭越将军印，令反梁地。楚令萧公角击彭越，彭越大破之。陈馀怨项羽之弗王己也，令夏说说<span class="annotation-btn" data-type="正义" data-content="上音悦，下音税。">【正义】</span>田荣，请兵击张耳。齐予陈馀兵，击破常山王张耳，张耳亡归汉。迎赵王歇于代，复立为赵王。赵王因立陈馀为代王。项羽大怒，北击齐。</p>

<p>八月，汉王用韩信之计，从故道<span class="annotation-btn" data-type="集解" data-content="地理志武都有故道县。">【集解】</span>还，袭雍王章邯。邯迎击汉陈仓，<span class="annotation-btn" data-type="正义" data-content="今岐州县也。">【正义】</span>雍兵败，还走；止战好畤，<span class="annotation-btn" data-type="集解" data-content="孟康曰：「畤音止，神灵之所在也，县名，属右扶风。」">【集解】</span>又复败，走废丘。汉王遂定雍地。东至咸阳，引兵围雍王废丘，<span class="annotation-btn" data-type="索隐" data-content="按荀悦汉纪，令樊哙围之。">【索隐】</span>而遣诸将略定陇西、北地、上郡。令将军薛欧、<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="音恶后反。">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="按表，欧以舍人从，为将军，封广平侯也。">【索隐】</span>
</span>王吸<span class="annotation-btn" data-type="索隐" data-content="按表，吸以中涓从，为将军，封清阳侯。">【索隐】</span>出武关，因王陵兵南阳，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="如淳曰：「王陵亦聚党数千人，居南阳。」">【集解】</span>
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「王陵故城在商州上洛县南三十一里。荆州记云昔汉高祖入秦，P陵起兵丹水以应之，此城王陵所筑，因名。」">【正义】</span>
</span>以迎太公、吕后于沛。楚闻之，发兵距之阳夏，<span class="annotation-btn" data-type="索隐" data-content="韦昭云：「县名，属淮阳，后属陈。夏音更雅反。」">【索隐】</span>不得前。令故吴令郑昌为韩王，距汉兵。</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <div id="popup-title"></div>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  // 拖拽功能变量
  let isDragging = false;
  let offsetX, offsetY;

  // 开始拖拽
  popup.addEventListener('mousedown', (e) => {
    if (e.target === closeBtn) return;
    isDragging = true;
    offsetX = e.clientX - popup.getBoundingClientRect().left;
    offsetY = e.clientY - popup.getBoundingClientRect().top;
    popup.style.cursor = 'grabbing';
  });

  // 拖拽中
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    popup.style.left = (e.clientX - offsetX) + 'px';
    popup.style.top = (e.clientY - offsetY) + 'px';
  });

  // 结束拖拽
  document.addEventListener('mouseup', () => {
    isDragging = false;
    popup.style.cursor = 'default';
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = type;
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      
      // 显示弹窗
      overlay.style.display = 'flex';
      
      // 初始居中定位
      const popupWidth = popup.offsetWidth;
      const popupHeight = popup.offsetHeight;
      popup.style.left = '50%';
      popup.style.top = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      
      e.stopPropagation();
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>
