<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>注解示范</title>
<style>
  body { font-family: "宋体", serif; line-height: 1.8; }
  .text { max-width: 800px; margin: 20px auto; }
  .annotation-btn {
    display: inline-block;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 0 4px;
    margin-left: 4px;
    cursor: pointer;
    font-size: 0.85em;
    color: #0077cc;
  }
  /* 弹窗背景层 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  /* 弹窗主体 */
  #popup {
    background: white;
    max-width: 600px;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 12px rgba(0,0,0,0.25);
    position: relative;
    font-size: 1em;
  }
  #popup h3 {
    margin-top: 0;
    font-weight: normal;
    font-size: 1.1em;
    color: #444;
  }
  #popup .close-btn {
    position: absolute;
    top: 8px; right: 12px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #333;
  }
</style>
</head>
<body>
<div class="text">

<p>秦二世元年
<span class="annotation-btn" data-type="集解" data-content="徐广曰：‘高祖时年四十八。’">【集解】</span>
<span class="annotation-btn" data-type="索隐" data-content="应劭云：‘始皇欲以一至万，示不相袭。始者一，故至子称二世。’崔浩云：‘二世，始皇子胡亥。’又按：善文称隐士云‘赵高为二世杀十七兄而立今王’，则二世是第十八子也。">【索隐】</span>
</p>

<p>秋，陈胜等起蕲，
<span class="annotation-btn" data-type="索隐" data-content="蕲，县名，属沛，音机，又音旂。">【索隐】</span>
</p>

<p>至陈而王，号为「张楚」。诸郡县皆多杀其长吏以应陈涉。沛令恐，欲以沛应涉。掾、主吏萧何、曹参
<span class="annotation-btn" data-type="索隐" data-content="按：汉书萧、曹传，参为狱掾，何为主吏也。">【索隐】</span>
</p>

<p>乃曰：「君为秦吏，今欲背之，率沛子弟，恐不听。愿君召诸亡在外者，可得数百人，因劫众，
<span class="annotation-btn" data-type="索隐" data-content="说文云‘以力胁之云劫’也。">【索隐】</span>
众不敢不听。」乃令樊哙召刘季。刘季之众已数十百人矣。
<span class="annotation-btn" data-type="索隐" data-content="汉书作‘数百人’。刘伯庄云‘言数十人或至百人’，则是百人已下也。">【索隐】</span>
</p>

<p>于是樊哙从刘季来。沛令后悔，恐其有变，乃闭城城守，欲诛萧、曹。萧、曹恐，逾城保刘季。
<span class="annotation-btn" data-type="集解" data-content="韦昭曰：‘以为保障。’">【集解】</span>
</p>

<p>刘季乃书帛射城上，谓沛父老曰：「天下苦秦久矣。今父老虽为沛令守，诸侯并起，今屠沛，
<span class="annotation-btn" data-type="索隐" data-content="按：范晔云‘剋城多所诛杀，故云屠也’。">【索隐】</span>
沛今共诛令，择子弟可立者立之，以应诸侯，则家室完。不然，父子俱屠，无为也。」父老乃率子弟共杀沛令，开城门迎刘季，欲以为沛令。刘季曰：「天下方扰，诸侯并起，今置将不善，壹败涂地，
<span class="annotation-btn" data-type="索隐" data-content="言一朝破败，使肝脑涂地。">【索隐】</span>
吾非敢自爱，恐能薄，
<span class="annotation-btn" data-type="正义" data-content="能，才能也。高祖谦言材能薄劣，不能完全其众。能者，兽，形色似熊，足似鹿。为物坚中而强力，人之有贤才者，皆谓之能也。">【正义】</span>
不能完父兄子弟。此大事，愿更相推择可者。」萧、曹等皆文吏，自爱，恐事不就，后秦种族其家，尽让刘季。诸父老皆曰：「平生所闻刘季诸珍怪，当贵，且卜筮之，莫如刘季最吉。」于是刘季数让。众莫敢为，乃立季为沛公。
<span class="annotation-btn" data-type="集解" data-content="徐广曰：‘九月也。’骃案：汉书音义曰‘旧楚僭称王，其县宰为公。陈涉为楚王，沛公起应涉，故从楚制称曰公’。">【集解】</span>
</p>

<p>祠黄帝，祭蚩尤于沛庭，
<span class="annotation-btn" data-type="集解" data-content="应劭曰：‘左传曰黄帝战于阪泉，以定天下。蚩尤好五兵，故祠祭之求福祥也。’瓒曰：‘管仲云“割卢山交而出水，金从之出，蚩尤受之以作剑戟”。’
【索隐】按：管子云‘葛卢之山，发而出金’，今注引‘发’作‘交’及‘割’，皆误也。而衅鼓【集解】应劭曰：‘衅，祭也。杀牲以血涂鼓曰衅。’瓒曰：‘案礼记及大戴礼有衅庙之礼，皆无祭事。’
【索隐】说文云：‘衅，血祭也。’司马法曰：‘血于鼙鼓者，神戎器也。’颜师古曰：‘凡杀牲以血祭者，皆名为衅。’臣瓒以为‘皆无祭事’，非也。又古人新成钟鼎，亦必衅之。应劭云：‘衅呼为亹。’马融注周礼灼龟之兆云：‘谓其象似玉、瓦、愿之衅棨，是用名之。’此说皆非。棨音火稼反。">【集解】【索隐】</span>
</p>

<p>旗，帜皆赤。
<span class="annotation-btn" data-type="索隐" data-content="墨翟云：‘帜，帛长丈五，广半幅。’字诂云：‘帜，标也。’字林云：‘熊旗五斿，谓与士卒为期于其下，故曰旗也。’帜，或作‘识’，或作‘志’。嵇康音试。萧该音炽。">【索隐】</span>
</p>

<p>由所杀蛇白帝子，杀者赤帝子，故上赤。于是少年豪吏如萧、曹、樊哙等皆为收沛子弟二三千人，攻胡陵、
<span class="annotation-btn" data-type="索隐" data-content="邓展曰：‘县名，属山阳，章帝改曰胡陆。’">【索隐】</span>
方与
，
<span class="annotation-btn" data-type="集解" data-content="郑德曰：‘音房豫，属山阳郡。’【索隐】郑玄曰‘属山阳’也。">【集解】【索隐】</span>
还守丰。</p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <h3 id="popup-title"></h3>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = '注解【' + type + '】';
      popupContent.textContent = content;
      overlay.style.display = 'flex';
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>
