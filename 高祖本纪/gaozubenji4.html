<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>高祖本纪 第四节</title>
<style>
  body { 
    font-family: "宋体", serif; 
    line-height: 1.4;
    font-size: 1.5em;
  }
  .text { 
    max-width: 800px; 
    margin: 20px auto;
    padding: 20px;
  }
  .annotation-btn {
    display: inline-block;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 0 4px;
    margin: 0 2px; /* 调整边距使并列注解更紧凑 */
    cursor: pointer;
    font-size: 0.85em;
    color: #0077cc;
  }
  .annotation-group {
    display: inline-flex; /* 使用flex布局使注解横向排列 */
    flex-wrap: nowrap;
    vertical-align: middle;
  }
  /* 弹窗背景层 */
  #overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  /* 弹窗主体 */
  #popup {
    background: white;
    max-width: 600px;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 12px rgba(0,0,0,0.25);
    position: relative;
    font-size: 0.8em;
    line-height: 1.3;
  }
  #popup h3 {
    margin-top: 0;
    font-weight: normal;
    color: #444;
    display: none;
  }
  #popup .close-btn {
    position: absolute;
    top: 8px; right: 12px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #popup .close-btn:hover {
    color: #333;
  }
</style>
</head>
<body>
<div class="text">

<p>秦二世二年，陈涉之将周章<span class="annotation-btn" data-type="索隐" data-content="应劭云：「章字文，陈人。」">【索隐】</span>军西至戏<span class="annotation-btn" data-type="索隐" data-content="文颖云：「在新丰东二十里戏亭北。」孟康云：「水名也。」又述征记云：「戏水自骊山冯公谷北流，历戏亭，东入渭。」按：今其水东惟有戏驿存。">【索隐】</span>而还。<span class="annotation-btn" data-type="索隐" data-content="为章邯所破而还。邯音酣。">【索隐】</span>燕、赵、齐、魏皆自立为王。<span class="annotation-btn" data-type="索隐" data-content="按：汉书高纪，二世二年八月，武臣自立为赵王，田儋自立为齐王，韩广自立为燕王，魏咎自立为魏王也。">【索隐】</span></p>

<p>项氏起吴。秦泗川监平<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="文颖曰：「泗川，今沛郡也，高祖更名沛。秦时御史监郡，若今刺史。平，名也。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="如淳云：「秦并天下为三十六郡，置守、尉、监，故此有『监平』，下有『守壮』，则平、壮皆名也。」">【索隐】</span>
</span>将兵围丰，二日，出与战，破之。命雍齿守丰，引兵之薛。泗州守壮<span class="annotation-btn" data-type="集解" data-content="如淳曰：「壮，名也。」">【集解】</span>败于薛，走至戚，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="如淳曰：「戚音将毒反。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="晋灼云：「东海县也。」郑德、包恺并如字读。李登音千笠反。">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「沂州临沂县有汉戚县故城。地理志云临沂县属东海郡。」沛公左司马得泗川守壮，杀之。">【正义】</span>
  <span class="annotation-btn" data-type="索隐" data-content="颜师古云「得，司马之名」，非也。按：后云「左司马曹无伤」，自此已下更不见替易处，盖是左司马无伤得泗川守壮而杀之耳。">【索隐】</span>
</span></p>

<p>沛公还军亢父，<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="郑德曰：「亢音人相亢答，父音甫。属任城郡。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="旧音刚。刘伯庄、包恺并同音苦浪反。">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="音刚，又苦浪反。括地志云：「亢父，县也，沛公屯军于此也。」">【正义】</span>
</span>至方与，未战。陈王使魏人周市略地。周市使人谓雍齿曰：「丰，故梁徙也。<span class="annotation-btn" data-type="集解" data-content="文颖曰：「梁惠王孙假为秦所灭，转东徙于丰，故曰『丰，梁徙』。」">【集解】</span>今魏地已定者数十城。齿今下魏，魏以齿为侯守丰。不下，且屠丰。」雍齿雅不欲属沛公，<span class="annotation-btn" data-type="集解" data-content="服虔曰：「雅，故也。」苏林曰：「雅，素也。」">【集解】</span>及魏招之，即反为魏守丰。沛公引兵攻丰，不能取。沛公病，还之沛。</p>

<p>沛公怨雍齿与丰子弟叛之，闻东阳宁君、秦嘉<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="文颖曰：「秦嘉，东阳郡人也，为宁县君。」瓒曰：「陈胜传曰『广陵人秦嘉』，然则嘉非东阳人也。秦嘉初起兵于郯，号曰大司马，又不为宁县君。东阳宁君自一人，秦嘉又自一人。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="臣瓒以为二人。按：下文直云「东阳宁君」，又别言「秦嘉」，明臣瓒之说为得。颜师古以宁是姓，君者，时人号之。">【索隐】</span>
</span>立景驹为假王，在留，<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「今彭城留县也。」">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「留城在徐州沛县东南五十里，即张良所封处。」">【正义】</span>
</span>乃往从之，欲请兵以攻丰。</p>

<p>是时秦将章邯从陈，别将司马尼<span class="annotation-group">
  <span class="annotation-btn" data-type="集解" data-content="如淳曰：「从陈涉将也。涉在陈，其将相别在他许，皆称陈。尼，章邯司马。」">【集解】</span>
  <span class="annotation-btn" data-type="索隐" data-content="谓章邯从陈别将，将兵向他处，而遣司马蘖将领兵士，北定楚地，故如淳云「尼，章邯司马」也。孔文祥亦曰「邯别遣蘖屠相」。又一说云「从谓追逐之，言章邯讨逐陈别将，而司马尼别将兵北定楚」，此理亦通也。">【索隐】</span>
</span>将兵北定楚地，屠相，至砀。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「相，沛县。」应劭曰：「砀属梁国。」苏林音唐，又音宕。">【索隐】</span>
  <span class="annotation-btn" data-type="正义" data-content="括地志云：「故相城在徐州符离县西北九十里。砀在宋州东一百五十里。」">【正义】</span>
</span></p>

<p>东阳宁君、沛公引兵西，与战萧西，<span class="annotation-btn" data-type="索隐" data-content="韦昭云：「萧，沛之县名，谓在萧县之西也。」">【索隐】</span>不利。还收兵聚留，引兵攻砀，三日乃取砀。因收砀兵，得五六千人。攻下邑，拔之。<span class="annotation-group">
  <span class="annotation-btn" data-type="索隐" data-content="范晔云「得城为拔」">【索隐】</span>
  <span class="annotation-btn" data-type="索隐" data-content="韦昭云：「县名，属梁国也。」">【索隐】</span>
</span></p>

<p>还军丰。闻项梁在薛，<span class="annotation-btn" data-type="正义" data-content="今徐州滕县，故薛城也。」">【正义】</span>从骑百馀往见之。<span class="annotation-btn" data-type="集解" data-content="徐广曰：「三月。」">【集解】</span>项梁益沛公卒五千人，五大夫将十人。<span class="annotation-btn" data-type="集解" data-content="苏林曰：「五大夫，第九爵也。以五大夫为将，凡十人也。」">【集解】</span>沛公还，引兵攻丰。<span class="annotation-btn" data-type="集解" data-content="徐广曰：「表云『拔之，雍齿奔魏』。」">【集解】</span></p>

</div>

<!-- 弹窗 -->
<div id="overlay">
  <div id="popup">
    <span class="close-btn" title="关闭">×</span>
    <h3 id="popup-title"></h3>
    <div id="popup-content"></div>
  </div>
</div>

<script>
  // 获取所有注解按钮
  const buttons = document.querySelectorAll('.annotation-btn');
  const overlay = document.getElementById('overlay');
  const popup = document.getElementById('popup');
  const popupTitle = document.getElementById('popup-title');
  const popupContent = document.getElementById('popup-content');
  const closeBtn = popup.querySelector('.close-btn');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const type = btn.getAttribute('data-type');
      const content = btn.getAttribute('data-content');
      popupTitle.textContent = '';
      popupContent.innerHTML = content.replace(/\n/g, '<br>');
      overlay.style.display = 'flex';
    });
  });

  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  // 点击遮罩层关闭弹窗
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>

</body>
</html>
