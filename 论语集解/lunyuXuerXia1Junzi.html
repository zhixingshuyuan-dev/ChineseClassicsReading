<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>论语解读 - 子夏曰</title>
    <style>
        body {
            font-family: "楷体", KaiTi, "STKaiti", serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #e2e8f0;
            background-color: #1a202c;
        }
        h1 {
            font-family: "黑体", SimHei, sans-serif;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #fbd38d;
        }
        .chapter-title {
            font-family: "楷体", KaiTi, "STKaiti", serif;
            font-size: 18px;
            text-align: center;
            margin: 20px 0;
            color: #a0aec0;
        }
        .main-text {
            font-size: 22px;
            text-align: center;
            margin: 40px 0;
            line-height: 2;
            padding: 20px;
            background-color: #2d3748;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #4a5568;
        }
        .char-container {
            display: inline-block;
            cursor: pointer;
            margin: 0 1px;
            position: relative;
            vertical-align: top;
        }
        .char-pinyin {
            display: none;
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #fbd38d;
            color: #1a202c;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .char-english {
            display: none;
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #fbd38d;
            color: #1a202c;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .char-pinyin:after, .char-english:after {
            content: "";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px 5px 0;
            border-style: solid;
            border-color: #fbd38d transparent transparent;
        }
        .char-pinyin:after {
            bottom: -5px;
        }
        .char-english:after {
            top: -5px;
            border-width: 0 5px 5px;
            border-color: transparent transparent #fbd38d;
        }
        .buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin: 25px 0;
        }
        .translation-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 10px 0 25px 0;
        }
        button {
            font-family: "楷体", KaiTi, "STKaiti", serif;
            padding: 8px 16px;
            background-color: #4a5568;
            border: 1px solid #718096;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            color: #e2e8f0;
        }
        button:hover {
            background-color: #718096;
            transform: translateY(-2px);
        }
        button.active {
            background-color: #fbd38d;
            color: #1a202c;
            border-color: #fbd38d;
        }
        button.translation {
            background-color: #68d391;
            border-color: #68d391;
        }
        button.lang-btn {
            padding: 6px 12px;
            font-size: 14px;
        }
        #annotationContent {
            background-color: #2d3748;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #4a5568;
        }
        .annotation-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #fbd38d;
            font-size: 18px;
            border-bottom: 1px solid #4a5568;
            padding-bottom: 8px;
        }
        .original-text {
            white-space: pre-wrap;
            margin-bottom: 5px;
            color: #e2e8f0;
        }
        .plain-text {
            background-color: #4a5568;
            padding: 10px;
            border-radius: 5px;
            line-height: 1.7;
            color: #e2e8f0;
            border-left: 3px solid #fbd38d;
            margin-bottom: 15px;
        }
        .english-text {
            background-color: #4a5568;
            padding: 10px;
            border-radius: 5px;
            line-height: 1.7;
            color: #e2e8f0;
            border-left: 3px solid #68d391;
        }
        .plain-title, .english-title {
            font-weight: bold;
            margin-bottom: 8px;
        }
        .plain-title {
            color: #fbd38d;
        }
        .english-title {
            color: #68d391;
        }
        #annotationContent > div:first-child {
            text-align: center;
            color: #a0aec0;
            font-style: italic;
        }
        .highlight {
            background-color: rgba(251, 211, 141, 0.3);
            border-radius: 3px;
            padding: 0 2px;
        }
    </style>
</head>
<body>
    <div class="chapter-title">論語集釋卷二 學而（下）</div>
    
    <h1>子夏曰：「賢賢易色；事父母，能竭其力；事君，能致其身；與朋友交，言而有信。雖曰未學，吾必謂之學矣。」</h1>
    
    <div class="main-text">
        <span class="char-container">
            <span>子</span>
            <span class="char-pinyin">zǐ</span>
            <span class="char-english">Master</span>
        </span>
        <span class="char-container">
            <span>夏</span>
            <span class="char-pinyin">xià</span>
            <span class="char-english">Xia</span>
        </span>
        <span class="char-container">
            <span>曰</span>
            <span class="char-pinyin">yuē</span>
            <span class="char-english">said</span>
        </span>
        <span class="char-container">
            <span>：</span>
        </span>
        <span class="char-container">
            <span>「</span>
        </span>
        <span class="char-container">
            <span>賢</span>
            <span class="char-pinyin">xián</span>
            <span class="char-english">virtue</span>
        </span>
        <span class="char-container">
            <span>賢</span>
            <span class="char-pinyin">xián</span>
            <span class="char-english">virtuous</span>
        </span>
        <span class="char-container">
            <span>易</span>
            <span class="char-pinyin">yì</span>
            <span class="char-english">change</span>
        </span>
        <span class="char-container">
            <span>色</span>
            <span class="char-pinyin">sè</span>
            <span class="char-english">appearance</span>
        </span>
        <span class="char-container">
            <span>；</span>
        </span>
        <span class="char-container">
            <span>事</span>
            <span class="char-pinyin">shì</span>
            <span class="char-english">serve</span>
        </span>
        <span class="char-container">
            <span>父</span>
            <span class="char-pinyin">fù</span>
            <span class="char-english">father</span>
        </span>
        <span class="char-container">
            <span>母</span>
            <span class="char-pinyin">mǔ</span>
            <span class="char-english">mother</span>
        </span>
        <span class="char-container">
            <span>，</span>
        </span>
        <span class="char-container">
            <span>能</span>
            <span class="char-pinyin">néng</span>
            <span class="char-english">can</span>
        </span>
        <span class="char-container">
            <span>竭</span>
            <span class="char-pinyin">jié</span>
            <span class="char-english">exhaust</span>
        </span>
        <span class="char-container">
            <span>其</span>
            <span class="char-pinyin">qí</span>
            <span class="char-english">one's</span>
        </span>
        <span class="char-container">
            <span>力</span>
            <span class="char-pinyin">lì</span>
            <span class="char-english">strength</span>
        </span>
        <span class="char-container">
            <span>；</span>
        </span>
        <span class="char-container">
            <span>事</span>
            <span class="char-pinyin">shì</span>
            <span class="char-english">serve</span>
        </span>
        <span class="char-container">
            <span>君</span>
            <span class="char-pinyin">jūn</span>
            <span class="char-english">ruler</span>
        </span>
        <span class="char-container">
            <span>，</span>
        </span>
        <span class="char-container">
            <span>能</span>
            <span class="char-pinyin">néng</span>
            <span class="char-english">can</span>
        </span>
        <span class="char-container">
            <span>致</span>
            <span class="char-pinyin">zhì</span>
            <span class="char-english">dedicate</span>
        </span>
        <span class="char-container">
            <span>其</span>
            <span class="char-pinyin">qí</span>
            <span class="char-english">one's</span>
        </span>
        <span class="char-container">
            <span>身</span>
            <span class="char-pinyin">shēn</span>
            <span class="char-english">body</span>
        </span>
        <span class="char-container">
            <span>；</span>
        </span>
        <span class="char-container">
            <span>與</span>
            <span class="char-pinyin">yǔ</span>
            <span class="char-english">with</span>
        </span>
        <span class="char-container">
            <span>朋</span>
            <span class="char-pinyin">péng</span>
            <span class="char-english">friend</span>
        </span>
        <span class="char-container">
            <span>友</span>
            <span class="char-pinyin">yǒu</span>
            <span class="char-english">friend</span>
        </span>
        <span class="char-container">
            <span>交</span>
            <span class="char-pinyin">jiāo</span>
            <span class="char-english">associate</span>
        </span>
        <span class="char-container">
            <span>，</span>
        </span>
        <span class="char-container">
            <span>言</span>
            <span class="char-pinyin">yán</span>
            <span class="char-english">words</span>
        </span>
        <span class="char-container">
            <span>而</span>
            <span class="char-pinyin">ér</span>
            <span class="char-english">and</span>
        </span>
        <span class="char-container">
            <span>有</span>
            <span class="char-pinyin">yǒu</span>
            <span class="char-english">have</span>
        </span>
        <span class="char-container">
            <span>信</span>
            <span class="char-pinyin">xìn</span>
            <span class="char-english">trust</span>
        </span>
        <span class="char-container">
            <span>。</span>
        </span>
        <span class="char-container">
            <span>雖</span>
            <span class="char-pinyin">suī</span>
            <span class="char-english">although</span>
        </span>
        <span class="char-container">
            <span>曰</span>
            <span class="char-pinyin">yuē</span>
            <span class="char-english">say</span>
        </span>
        <span class="char-container">
            <span>未</span>
            <span class="char-pinyin">wèi</span>
            <span class="char-english">not</span>
        </span>
        <span class="char-container">
            <span>學</span>
            <span class="char-pinyin">xué</span>
            <span class="char-english">study</span>
        </span>
        <span class="char-container">
            <span>，</span>
        </span>
        <span class="char-container">
            <span>吾</span>
            <span class="char-pinyin">wú</span>
            <span class="char-english">I</span>
        </span>
        <span class="char-container">
            <span>必</span>
            <span class="char-pinyin">bì</span>
            <span class="char-english">must</span>
        </span>
        <span class="char-container">
            <span>謂</span>
            <span class="char-pinyin">wèi</span>
            <span class="char-english">say</span>
        </span>
        <span class="char-container">
            <span>之</span>
            <span class="char-pinyin">zhī</span>
            <span class="char-english">him</span>
        </span>
        <span class="char-container">
            <span>學</span>
            <span class="char-pinyin">xué</span>
            <span class="char-english">learned</span>
        </span>
        <span class="char-container">
            <span>矣</span>
            <span class="char-pinyin">yǐ</span>
            <span class="char-english">already</span>
        </span>
        <span class="char-container">
            <span>。</span>
        </span>
        <span class="char-container">
            <span>」</span>
        </span>
    </div>
    
    <div class="buttons">
        <button onclick="speakChinese()">朗读全文</button>
        <button onclick="showAnnotation('考異')">考異</button>
        <button onclick="showAnnotation('考證')">考證</button>
        <button onclick="showAnnotation('集解')">集解</button>
        <button onclick="showAnnotation('唐以前古注')">唐以前古注</button>
        <button onclick="showAnnotation('集注')">集注</button>
        <button onclick="showAnnotation('別解')">別解</button>
        <button onclick="showAnnotation('餘論')">餘論</button>
    </div>
    
    <div class="translation-buttons">
        <button onclick="showTranslation('en')" class="lang-btn">English</button>
        <button onclick="showTranslation('fr')" class="lang-btn">Français</button>
        <button onclick="showTranslation('de')" class="lang-btn">Deutsch</button>
        <button onclick="showTranslation('es')" class="lang-btn">Español</button>
        <button onclick="showTranslation('ja')" class="lang-btn">日本語</button>
        <button onclick="showTranslation('ko')" class="lang-btn">한국어</button>
        <button onclick="showTranslation('la')" class="lang-btn">Latina</button>
        <button onclick="showTranslation('el')" class="lang-btn">Ελληνικά</button>
    </div>
    
    <div id="annotationContent">
        <div>请点击上方按钮选择注解类别</div>
    </div>
    
    <script>
        // 朗读功能
        function speakChinese() {
            if ('speechSynthesis' in window) {
                // 停止当前所有语音
                window.speechSynthesis.cancel();
                
                const speech = new SpeechSynthesisUtterance();
                speech.text = "子夏曰：「賢賢易色；事父母，能竭其力；事君，能致其身；與朋友交，言而有信。雖曰未學，吾必謂之學矣。」";
                speech.lang = "zh-CN";
                speech.rate = 0.8;
                window.speechSynthesis.speak(speech);
            } else {
                alert("您的浏览器不支持语音合成功能，请使用现代浏览器如Chrome、Edge等。");
            }
        }
        
        // 多语言翻译
        const translations = {
            'en': "Zi Xia said: 'If a man honors virtue over beauty, serves his parents with all his strength, serves his ruler by dedicating himself completely, and is trustworthy in speech when dealing with friends - though he says he has not learned, I would certainly say he has.'",
            'fr': "Zi Xia dit : 'Si un homme honore la vertu plutôt que la beauté, sert ses parents de toutes ses forces, sert son souverain en se consacrant complètement, et est digne de confiance dans ses paroles lorsqu'il traite avec des amis - bien qu'il dise qu'il n'a pas appris, je dirais certainement qu'il a appris.'",
            'de': "Zi Xia sagte: 'Wenn ein Mann die Tugend über die Schönheit ehrt, seinen Eltern mit all seiner Kraft dient, seinem Herrscher durch völlige Hingabe dient und im Umgang mit Freunden vertrauenswürdig in der Rede ist - obwohl er sagt, er habe nicht gelernt, würde ich sicherlich sagen, dass er gelernt hat.'",
            'es': "Zi Xia dijo: 'Si un hombre honora la virtud sobre la belleza, sirve a sus padres con todas sus fuerzas, sirve a su gobernante dedicándose por completo y es confiable en el habla cuando trata con amigos, aunque diga que no ha estudiado, ciertamente diría que lo ha hecho.'",
            'ja': "子夏曰く、「賢を賢として色を易う。父母に事えては、能く其の力を竭し、君に事えては、能く其の身を致し、朋友と交わりては、言いて信有り。未だ学ばずと曰うと雖も、吾必ず之を学びたりと謂わん」と。",
            'ko': "자하가 말하였다: '어진 이를 어질게 여기며 안색을 바꾸고, 부모를 섬기되 그 힘을 다하며, 임금을 섬기되 그 몸을 바치며, 벗과 사귐에 말에 신의가 있다면 비록 배우지 않았다고 말할지라도 나는 반드시 그를 배운 사람이라 하리라.'",
            'la': "Zi Xia dixit: 'Si homo virtutem super pulchritudinem honorat, parentibus totis viribus servit, principi se totum dedicat, et cum amicis verax est - quamvis dicat se non didicisse, certe dicam eum didicisse.'",
            'el': "Ο Ζι Ξια είπε: 'Εάν ένας άνδρας τιμά την αρετή πάνω από την ομορφιά, υπηρετεί τους γονείς του με όλη του τη δύναμη, υπηρετεί τον κυβερνήτη του αφιερώνοντας τον εαυτό του πλήρως, και είναι αξιόπιστος στην ομιλία όταν ασχολείται με φίλους - αν και λέει ότι δεν έχει μάθει, σίγουρα θα έλεγα ότι έχει.'"
        };
        
        // 注解内容
        const annotations = {
            '考異': {
                original: "毛詩思齊正義曰：「論語子夏說人有四行，『雖曰未學，吾必謂之學矣』。」以人有四行括上文。\n翟氏考異：按箋疏中此類時有。如在曲禮正義引論語云：「子路、曾晳、冉有、公西華侍於孔子。孔子問四人各言其志，子路率爾先對。」亦以「問四人各言其志」括兩節文。撮經大意，非緣據本別也。後不泛采，聊借一端發凡。",
                plain: "《毛诗·思齐》正义引用时将上文概括为'人有四行'。\n翟灏《考异》指出：这种概括方式在注疏中常见。\n例如《礼记·曲礼》正义引用《论语》时也概括为'孔子问四人各言其志'。\n这是撮述经典大意的常见方式，并非版本不同。",
                english: "The Correct Meaning of Mao Shi summarizes the passage as 'four behaviors of a person'.\nZhai Hao's Textual Differences notes this is a common summarizing method in commentaries.\nFor example, the Correct Meaning of Liji also summarizes the passage about four disciples.\nThis is a common way to outline the main idea, not due to different versions."
            },
            '考證': {
                original: "劉氏正義：史記弟子列傳：「卜商字子夏。少孔子四十四歲」。集解引鄭說：「溫國卜商。」溫是衛邑，稱國者，或本爲國，從其初名之也。家語弟子解以爲衛人，與鄭目錄合。孔穎達檀弓疏則云魏人。又唐贈魏侯，宋封魏公。據史記及呂氏春秋舉難、察賢篇，並言子夏爲魏文侯師，是子夏固嘗居魏。魏、衛同音，故誤以爲魏人耳。又曰：說文「父，矩也，家長率教者，從又舉杖。母，牧也。從女，象懷子形，一曰象乳子也。」說文又云：「竭，負舉也。」負舉者必盡力，故竭又訓盡，此文義得兼之。曾子本孝云：「庶人之孝也，以力惡食。」盧辯注：「分地任力致甘美。」又曾子大孝云：「小孝用力，慈愛忘勞，可謂用力矣。」孔氏廣森補注：「庶人之孝。」孟子萬章篇言舜事云：「我竭力耕田，供爲子職而已矣。」是竭力爲庶人孝養之事也。「事君能致其身」者，儀禮喪服傳：「君，至尊也。」郑注：「天子諸侯及卿大夫有地者皆曰君。」說文：「致，送詣也。」詩四牡云：「四牡騑騑，周道倭遲。豈不懷歸？王事靡盬，我心傷悲。」毛傳云：「思歸者，私恩也。靡盬者，公義也。傷悲者，情思也。無私恩，非孝子也。無公義，非忠臣也。君子不以私害公，不以家事辭王事。是言事君不得私愛其身，稽留君事也。",
                plain: "刘宝楠《正义》考证：\n1. 子夏生平：\n- 名卜商，字子夏，少孔子44岁\n- 郑玄称'温国卜商'，温是卫邑\n- 有记载为卫人，也有记载为魏人\n- 曾为魏文侯师，可能因卫魏同音而混淆\n\n2. 文字训诂：\n- '父'字本义为执杖教子者\n- '母'字本义为哺育子女\n- '竭'字本义为尽力\n\n3. 孝道解释：\n- 庶人之孝在于尽力供养\n- 引曾子、孟子说明孝养之道\n\n4. 事君之道：\n- '君'包括天子、诸侯、有地大夫\n- '致其身'指完全奉献\n- 引《诗经》说明公私之辨",
                english: "Liu Baonan's Correct Meanings examines:\n1. Zi Xia's biography:\n- Named Bu Shang, styled Zi Xia, 44 years younger than Confucius\n- Zheng Xuan calls him 'Bu Shang of Wen State'\n- Recorded as from Wei (卫) but sometimes mistaken for Wei (魏)\n\n2. Character explanations:\n- 'Father' originally means disciplinarian\n- 'Mother' originally means nurturer\n- 'Exhaust' means to do one's utmost\n\n3. Filial piety:\n- Commoners' filial duty is to support parents\n- Quotes Zengzi and Mencius\n\n4. Serving ruler:\n- 'Ruler' includes various lords\n- 'Dedicate oneself' means complete devotion\n- Quotes Book of Songs on public-private distinction"
            },
            '集解': {
                original: "孔曰：「子夏，弟子卜商也。易色，言以好色之心好賢則善也。致其身，盡忠節不愛其身也。」",
                plain: "孔安国注：\n- 子夏是孔子弟子卜商\n- '易色'指以好色之心好贤\n- '致其身'指尽忠节不惜身",
                english: "Kong Anguo notes:\n- Zi Xia is disciple Bu Shang\n- 'Change appearance' means esteem virtue like beauty\n- 'Dedicate oneself' means loyal sacrifice"
            },
            '唐以前古注': {
                original: "皇疏：凡人之情莫不好色而不好賢，今若有人能改易好色之心以好於賢，則此人便是賢於賢者，故云「賢賢易色也。然云賢於賢者，亦是獎勸之辭也。又一通云：上賢字，猶尊重也。下賢字，謂賢人也。言若欲尊重此賢人，則當改易其平常之色，更起莊敬之容也。又引王雍云：言能行此四者，雖云未學，而可謂已學也。\n按：王雍不知何許人，馬國翰以爲卽論語王氏義說之文，據錄。",
                plain: "皇侃疏：\n1. 常人好色不好贤，能改此心便是贤于贤者\n2. 另一种解释：\n- 上'贤'字是尊重\n- 下'贤'字指贤人\n- 尊重贤人当改变平常态度\n3. 引王雍说：能行此四事虽未学可谓已学\n\n按：王雍生平不详，马国翰认为是《论语王氏义说》作者",
                english: "Huang Kan's commentary:\n1. People prefer beauty to virtue; changing this makes one virtuous\n2. Alternate reading:\n- First 'virtue' means respect\n- Second 'virtue' means virtuous person\n- Respect requires changed demeanor\n3. Quotes Wang Yong: Practicing these four means learned\n\nNote: Wang Yong's identity unclear, possibly author of Wang's Explanations"
            },
            '集注': {
                original: "子夏，孔子弟子，姓卜名商，賢人之賢而易其好色之心，好善有誠也。致，猶委也。委致其身，謂不有其身也。四者皆人倫之大者，而行之必盡其誠，學求如是而已。故子夏言有能如是之人，苟非生質之美，必其務學之至，雖或以爲未嘗爲學，我必謂之已學也。遊氏曰：「三代之學，皆所以明人倫也。能是四者，則於人倫厚矣。學之爲道何以加此？子夏以文學名，而其言如此，則古人之所謂學者可知矣。故學而一篇大抵皆在於務本。」吳氏曰：「子夏之言其意善矣。然辭氣之間抑揚太過，其流之弊，將或至於廢學。必若上章夫子之言，然後爲無弊也。」",
                plain: "朱熹《集注》：\n1. 子夏是卜商\n2. '贤贤易色'指诚心好善\n3. '致其身'指完全奉献\n4. 四事为人伦大节，力行即是学\n5. 引游酢说：三代之学皆明人伦\n6. 引吴棫说：子夏之言可能被误解为废学\n\n强调实践为本的学问观",
                english: "Zhu Xi's Collected Commentaries:\n1. Zi Xia is Bu Shang\n2. 'Esteem virtue' means sincere love of good\n3. 'Dedicate oneself' means complete devotion\n4. These four are key human relations - practice is learning\n5. Quotes You Zuo: Ancient learning clarified relations\n6. Quotes Wu Yu: Zi Xia's words risk overemphasis\n\nEmphasizes practice as foundation of learning"
            },
            '別解': {
                original: "陳祖范經咫：此主夫婦一倫而言。賢賢如關雎之「窈窕淑女，君子好逑」，車舝之「辰彼碩女，令德來教」。易色如所謂情欲之感無介乎容儀，宴私之意不形乎動靜。在婦爲嫁德不嫁容，在夫爲好德非好色也。宋翔鳳樸學齋劄記：陽湖劉申受謂「賢賢易色，明夫婦之倫也」。毛詩序云：「周南、召南，正始之道，王化之基。是以關雎樂得淑女以配君子，憂在進賢，不淫其色。哀窈窕，思賢才，而無傷善之心焉。是關雎之義也。」此「賢賢易色」指夫婦之切證。 論語述何：賢賢者，同德也，易讀如「易知則有親」之易。六經之道，造端乎夫婦。詩桃夭「灼灼其華」，喻色也；「有蕡其實」，喻賢也。有夫婦然後有父子，有父子然後有君臣，故首舉之。 梁章钜論語集注旁證：集注云「四者皆人倫之大者」，則下文只有事父、事君、交朋友，此句自應屬夫婦說。娶妻重德不重色，亦厚人倫之一事也。 劉氏正義：今案夫婦爲人倫之始，故此文敘于事父母事君之前。漢書李尋傳引此文，顏師古注：「易色，輕略於色，不貴之也。康有爲論語注：此爲明人倫而發。人道始于夫婦，夫婦牉合之久，所貴在德，以賢爲賢，言擇配之始，當以好德易其好色。蓋色衰則愛弛，而夫婦道苦；惟好德乃可久合。",
                plain: "各家别解：\n1. 陈祖范认为专指夫妇伦理\n- '贤贤'如《关雎》求淑女\n- '易色'指重德不重色\n\n2. 宋翔凤引刘逢禄说\n- 以《诗经》序为证\n- 夫妇为人伦之始\n\n3. 刘逢禄《论语述何》\n- '贤贤'指同德\n- 六经之道始于夫妇\n\n4. 梁章钜《旁证》\n- 据《集注》逻辑应指夫妇\n\n5. 刘宝楠《正义》\n- 夫妇为人伦之始故列首位\n- 引颜师古注'易色'为轻色\n\n6. 康有为注\n- 强调夫妇以德相合",
                english: "Alternative interpretations:\n1. Chen Zufan focuses on marital relation\n- 'Esteem virtue' like seeking virtuous bride\n- 'Change appearance' means value virtue over looks\n\n2. Song Xiangfeng quotes Liu Fenglu\n- Cites Book of Songs preface\n- Marriage as human relations foundation\n\n3. Liu Fenglu's Explanations\n- 'Virtue' means shared morality\n- Classics begin with marriage\n\n4. Liang Zhangju's Evidence\n- Zhu Xi's logic implies marital meaning\n\n5. Liu Baonan's Correct Meanings\n- Marriage first in human relations\n- Quotes Yan Shigu on 'changing appearance'\n\n6. Kang Youwei's Note\n- Emphasizes virtue-based marriage"
            },
            '餘論': {
                original: "四書辨疑：吳氏誤認「雖曰未學」以爲實未嘗學，不學者亦能此事，故有將至廢學之論。此說蓋出於舊疏。舊疏云：「此論生知美行，雖學亦不是過。」蓋以曰字爲語助辭虛字，言雖未學，亦與學者無異。果如此說，則下「學」字上須當更有猶字矣。不知「雖曰未學」乃子夏假設能於此者自謂之言，非子夏實謂未學也。劉正叟曰：「其人既能此等之事，而自言未學，吾必謂之已學，蓋此等非學不能也。」此最簡直明白。四書改錯：子夏是節詞氣抑揚，與有子孝弟章正同。有子重孝弟，子夏重力行，未嘗廢學也，孟子曰：「人之所不學而能者，其良能也。」是明言不學尚非廢學。今但云未學，而卽云有廢學之弊，此何說與？ 反身錄：問：「學在敦倫固矣，然敦倫可遂不學乎？」曰：「學以學夫敦倫，而敦倫乃所以爲學也。舍倫而言學，則其學爲口耳章句之學，富貴利達之學，失其所以學。」曰：「如是，則吳氏之言亦不爲無見。」曰：「吳氏固爲有見，而以之致疑子夏，實未達子夏口氣。蓋抑揚其語，正所以折衷學問之實，令人知之言所以爲學，在此而不在彼。所重在此，所學卽在此。自此說出，而天下後世人人曉然知所從事，不至誤以口耳辭章之末了生平。其有補於綱常名教非尠，真學者之清夜鐘也。何流弊之可言？亦何至於廢學？」 松陽講義：辛複元謂此章「不是說學貴實行，是說學問有益。世人只說人能敦倫便是學問，何必讀書然後爲學。不知學不分明，豈能敦得倫紀？且子夏以文學著名，豈肯爲廢學之語？」又曰：「吾每望人力行，尤望人力行前先有講明工夫，不然，自以爲行善事，行之未有不差者。」說此章「學」字最分明，正是朱子圈內注之意。",
                plain: "各家余论：\n1. 《四书辨疑》批评吴棫误解\n- '虽曰未学'是假设语气\n- 刘正叟指出此等行为非学不能\n\n2. 《四书改错》\n- 子夏与有子一样强调根本\n- 引孟子说明良能不同于废学\n\n3. 《反身录》\n- 学与敦伦相辅相成\n- 为子夏辩护：强调根本非废学\n\n4. 《松阳讲义》\n- 辛全指出学与实践并重\n- 强调明理在先的重要性\n\n总结：\n各家为子夏辩护，指出强调实践不等于否定学习",
                english: "Further discussions:\n1. Four Books Disputes critiques Wu Yu\n- 'Although says unlearned' is hypothetical\n- Liu Zhengso notes these require learning\n\n2. Four Books Corrections\n- Zi Xia emphasizes fundamentals like Youzi\n- Quotes Mencius on innate ability\n\n3. Self-Reflection Record\n- Learning and practice complement\n- Defends Zi Xia: emphasizing roots\n\n4. Songyang Lectures\n- Xin Quan stresses both theory and practice\n- Emphasizes understanding first\n\nConclusion:\nScholars defend Zi Xia - practice emphasis doesn't negate learning"
            }
        };
        
        // 当前选中的注解类型
        let currentAnnotation = null;
        let currentHighlight = null;
        
        // 显示注解功能
        function showAnnotation(type) {
            // 停止任何正在进行的语音
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
            
            if (!annotations[type]) return;
            
            currentAnnotation = type;
            
            // 更新按钮状态
            document.querySelectorAll('.buttons button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 分割原文和白话翻译
            const originalLines = annotations[type].original.split('\n');
            const plainLines = annotations[type].plain.split('\n');
            
            // 构建注解内容
            let content = `
                <div class="annotation-title">【${type}】</div>
            `;
            
            // 逐行显示原文和白话翻译
            for (let i = 0; i < originalLines.length; i++) {
                if (originalLines[i].trim() === '') continue;
                
                content += `
                    <div class="original-text" id="orig-${i}">${originalLines[i]}</div>
                    <div class="plain-title">白话文翻译：</div>
                    <div class="plain-text" id="plain-${i}">${plainLines[i] || ''}</div>
                `;
            }
            
            // 添加英文翻译
            content += `
                <div class="english-title">English Translation:</div>
                <div class="english-text" id="english-translation">${annotations[type].english.replace(/\n/g, '<br>')}</div>
            `;
            
            // 添加按钮
            content += `
                <div style="text-align: right; margin-top: 15px;">
                    <button onclick="speakAnnotation()" style="padding: 5px 12px; font-size: 14px; margin-right: 5px;">
                        语音讲解
                    </button>
                    <button onclick="toggleEnglish()" style="padding: 5px 12px; font-size: 14px; background-color: #68d391; border-color: #68d391;">
                        显示英文
                    </button>
                </div>
            `;
            
            document.getElementById("annotationContent").innerHTML = content;
        }
        
        // 显示/隐藏英文翻译
        function toggleEnglish() {
            const english = document.getElementById("english-translation");
            const button = event.target;
            if (english.style.display === 'none') {
                english.style.display = 'block';
                button.textContent = '隐藏英文';
            } else {
                english.style.display = 'none';
                button.textContent = '显示英文';
            }
        }
        
        // 显示多语翻译
        function showTranslation(lang) {
            // 停止任何正在进行的语音
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
            
            // 更新按钮状态
            document.querySelectorAll('.translation-buttons button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            let content = `
                <div class="annotation-title">【${getLanguageName(lang)}翻译】</div>
                <div class="original-text">子夏曰：「賢賢易色；事父母，能竭其力；事君，能致其身；與朋友交，言而有信。雖曰未學，吾必謂之學矣。」</div>
                <div class="plain-title">白话文翻译：</div>
                <div class="plain-text">子夏说："尊重贤德胜过美色；侍奉父母能竭尽全力；服事君主能奉献生命；与朋友交往言而有信。这样的人即使自称没有学习过，我也一定说他学习过了。"</div>
                <div class="english-title">${getLanguageName(lang)} Translation:</div>
                <div class="english-text">${translations[lang]}</div>
            `;
            
            document.getElementById("annotationContent").innerHTML = content;
        }
        
        // 获取语言名称
        function getLanguageName(lang) {
            const names = {
                'en': 'English',
                'fr': 'Français',
                'de': 'Deutsch',
                'es': 'Español',
                'ja': '日本語',
                'ko': '한국어',
                'la': 'Latina',
                'el': 'Ελληνικά'
            };
            return names[lang] || 'English';
        }
        
        // 朗读注解（先读原文句子，再读对应翻译）
        function speakAnnotation() {
            if (!currentAnnotation || !annotations[currentAnnotation]) {
                alert("请先选择注解内容");
                return;
            }
            
            if (!window.speechSynthesis) {
                alert("您的浏览器不支持语音合成功能");
                return;
            }
            
            // 停止当前所有语音
            window.speechSynthesis.cancel();
            
            // 清除之前的高亮
            if (currentHighlight) {
                currentHighlight.classList.remove('highlight');
                currentHighlight = null;
            }
            
            const originalLines = annotations[currentAnnotation].original.split('\n');
            const plainLines = annotations[currentAnnotation].plain.split('\n');
            
            // 逐个朗读原文句子和对应解释
            let index = 0;
            
            function speakNext() {
                if (index < originalLines.length) {
                    const origLine = originalLines[index].trim();
                    const plainLine = plainLines[index] ? plainLines[index].trim() : "";
                    
                    if (!origLine) {
                        index++;
                        return speakNext();
                    }
                    
                    // 高亮当前句子
                    const origElement = document.getElementById(`orig-${index}`);
                    const plainElement = document.getElementById(`plain-${index}`);
                    
                    if (origElement) {
                        origElement.classList.add('highlight');
                        currentHighlight = origElement;
                    }
                    
                    if (plainElement) {
                        plainElement.classList.add('highlight');
                    }
                    
                    // 朗读原文句子
                    const speech1 = new SpeechSynthesisUtterance();
                    speech1.text = origLine;
                    speech1.lang = "zh-CN";
                    speech1.rate = 0.7;
                    
                    // 朗读对应的白话解释
                    const speech2 = new SpeechSynthesisUtterance();
                    speech2.text = plainLine;
                    speech2.lang = "zh-CN";
                    speech2.rate = 0.8;
                    
                    // 先读原文，读完后再读解释
                    speech1.onend = function() {
                        if (plainLine) {
                            window.speechSynthesis.speak(speech2);
                            speech2.onend = function() {
                                if (origElement) origElement.classList.remove('highlight');
                                if (plainElement) plainElement.classList.remove('highlight');
                                index++;
                                setTimeout(speakNext, 300);
                            };
                        } else {
                            if (origElement) origElement.classList.remove('highlight');
                            index++;
                            setTimeout(speakNext, 300);
                        }
                    };
                    
                    window.speechSynthesis.speak(speech1);
                } else {
                    currentHighlight = null;
                }
            }
            
            speakNext();
        }
        
        // 为每个汉字添加点击显示拼音/英文功能
        document.querySelectorAll('.char-container').forEach(container => {
            const pinyin = container.querySelector('.char-pinyin');
            const english = container.querySelector('.char-english');
            let clickCount = 0;
            
            if (!pinyin && !english) return;
            
            container.addEventListener('click', (e) => {
                e.stopPropagation();
                
                clickCount++;
                
                // 隐藏所有提示
                document.querySelectorAll('.char-pinyin, .char-english').forEach(p => {
                    p.style.display = 'none';
                });
                
                // 第一次点击显示拼音，第二次显示英文
                if (clickCount % 2 === 1 && pinyin) {
                    pinyin.style.display = 'block';
                } else if (english) {
                    english.style.display = 'block';
                }
                
                // 3秒后自动隐藏
                setTimeout(() => {
                    if (pinyin) pinyin.style.display = 'none';
                    if (english) english.style.display = 'none';
                }, 3000);
            });
        });
        
        // 点击页面其他地方隐藏所有提示
        document.addEventListener('click', () => {
            document.querySelectorAll('.char-pinyin, .char-english').forEach(p => {
                p.style.display = 'none';
            });
        });
    </script>
</body>
</html>