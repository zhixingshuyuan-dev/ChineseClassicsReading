<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>論語集釋 學而</title>
    <style>
        body {
            font-family: 'KaiTi', '楷体', serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5e9dc;
            color: #5a4a3a;
        }
        .title {
            font-size: 32px;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
            font-family: 'SimHei', '黑体', sans-serif;
            color: #8b4513;
        }
        .main-text {
            font-size: 28px;
            text-align: center;
            margin: 40px 0;
            line-height: 2;
            font-family: 'SimHei', '黑体', sans-serif;
            color: #5a3e36;
        }
        .pinyin-display {
            font-size: 24px;
            text-align: center;
            color: #8b5a2b;
            height: 40px;
            margin-bottom: 20px;
            font-family: 'SimHei', '黑体', sans-serif;
        }
        .char {
            cursor: pointer;
            padding: 0 5px;
        }
        .char:hover {
            background-color: #e8d5b7;
            border-radius: 5px;
        }
        .buttons {
            text-align: center;
            margin: 30px 0;
        }
        button {
            padding: 12px 24px;
            margin: 8px;
            background-color: #d2b48c;
            border: 1px solid #b8860b;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            font-family: 'KaiTi', '楷体', serif;
            color: #5a3e36;
        }
        button:hover {
            background-color: #cdaa7d;
        }
        .annotation {
            display: none;
            margin: 30px 0;
            padding: 25px;
            border: 1px solid #d2b48c;
            border-radius: 8px;
            background-color: #f0e0c9;
            font-size: 24px;
            line-height: 1.8;
            color: #5a4a3a;
        }
        .annotation.active {
            display: block;
        }
        .annotation-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #8b4513;
            font-size: 28px;
            font-family: 'SimHei', '黑体', sans-serif;
        }
        .read-btn {
            margin-top: 20px;
            background-color: #cd853f;
            font-size: 22px;
            padding: 10px 20px;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="title">論語集釋 學而</div>
    
    <div class="pinyin-display" id="pinyin-display">点击汉字显示拼音</div>
    
    <div class="main-text" id="main-text">
        <span class="char" onclick="showPinyin('rén')">人</span>
        <span class="char" onclick="showPinyin('bù')">不</span>
        <span class="char" onclick="showPinyin('zhī')">知</span>
        <span class="char" onclick="showPinyin('ér')">而</span>
        <span class="char" onclick="showPinyin('bù')">不</span>
        <span class="char" onclick="showPinyin('yùn')">愠</span>
        <span class="char" onclick="showPinyin('，')">，</span>
        <span class="char" onclick="showPinyin('bù')">不</span>
        <span class="char" onclick="showPinyin('yì')">亦</span>
        <span class="char" onclick="showPinyin('jūn')">君</span>
        <span class="char" onclick="showPinyin('zǐ')">子</span>
        <span class="char" onclick="showPinyin('hū')">乎</span>
        <span class="char" onclick="showPinyin('？')">？</span>
    </div>
    
    <div class="buttons">
        <button onclick="readText()">朗读正文</button>
    </div>
    
    <div class="buttons">
        <button onclick="showAnnotation('kaozheng')">考證</button>
        <button onclick="showAnnotation('jijie')">集解</button>
        <button onclick="showAnnotation('tangqian')">唐以前古注</button>
        <button onclick="showAnnotation('jizhu')">集注</button>
        <button onclick="showAnnotation('biejie')">別解</button>
        <button onclick="showAnnotation('yulun')">餘論</button>
        <button onclick="showAnnotation('faming')">發明</button>
    </div>
    
    <div id="kaozheng" class="annotation">
        <div class="annotation-title">考證</div>
        <p>禮•哀公問：「君子也者，人之成名也。」白虎通•號篇：「或稱君子者，道德之稱也。君之爲言，羣也。子者，丈夫之通稱也。」</p>
        <button class="read-btn" onclick="readAnnotation('kaozheng')">朗读注解</button>
    </div>
    
    <div id="jijie" class="annotation">
        <div class="annotation-title">集解</div>
        <p>愠，怒也。凡人有所不知，君子不怒。（凡不載何人說者，皆何晏之詞。下倣此。）</p>
        <button class="read-btn" onclick="readAnnotation('jijie')">朗读注解</button>
    </div>
    
    <div id="tangqian" class="annotation">
        <div class="annotation-title">唐以前古注</div>
        <p>皇疏此有二釋：一云：「古之學者爲己，已得先王之道，含章內映，他人不見知而我不怒也。」一云：「君子易事，不求備於一人。故爲教誨之道，若人有鈍根不能知解者，君子恕之而不愠怒也。」又引李充云：愠，怒也。君子忠恕，誨人不倦，何怒之有乎？明夫學者，始於時習，中於講肄，終於教授者也。</p>
        <p>按：晉書•文苑傳：「充字宏度，江夏人。官著作郎。」七錄載充論語釋一卷，至隋已亡。隋書•經籍志別有論語十卷，晉著作郎李充注。唐書•藝文志並同。而宋史•藝文志不載，今佚。玉函山房有輯本二卷，茲錄之以備一家。</p>
        <button class="read-btn" onclick="readAnnotation('tangqian')">朗读注解</button>
    </div>
    
    <div id="jizhu" class="annotation">
        <div class="annotation-title">集注</div>
        <p>愠，含怒意。君子，成德之名。尹氏曰：「學在己知，不知在人，何愠之有？」</p>
        <button class="read-btn" onclick="readAnnotation('jizhu')">朗读注解</button>
    </div>
    
    <div id="biejie" class="annotation">
        <div class="annotation-title">別解</div>
        <p>王衡論語駁異：羅近溪謂「愈學而愈悦，如何有厭；愈教而愈樂，如何有倦；故不愠人之不己知者，正以其不厭不倦處」。此却說得好。論語補疏：注言「人有所不知」，則是人自不知，非不知己也。有所不知，則亦有所知。我所知而人不知，因而愠之，矜也；人所知而我不知，又因而愠之，忌也。君子不矜則不忌，可知其心休休，所以爲君子也。後漢•儒林傳注引魏略云：「樂詳字文載。黄初中，徵拜博士十餘人，學多褊，又不熟悉，惟詳五業並授。其或難質不解，詳無愠色，以杖畫地，牽譬引類，至忘寢食。」毛奇齡四書賸言：論語「人不知而不愠」，孔疏原有二義：一是不知學，一是不知我。今人但知後說，似于本章言學之意反未親切。何平叔云：「凡人有所不知，君子不怒。」其云「有所不知」者，言學有所不解也。「君子不怒」者，猶言「君子易事不求備」也。蓋獨學共學，教人以學，皆學中事。夫子一生祇學不厭，教不倦，自言如此（見默識節），門弟子言如此（見公西華節），後人言如此（見孟子），故首章卽以此發明之。</p>
        <p>按：此本李充之說，皇疏取之，然實不如朱注之長。劉寶楠云：「教學之法，語之而不知，雖舍之亦可，無容以不愠卽稱君子。此注所云不與經旨應也。」</p>
        <button class="read-btn" onclick="readAnnotation('biejie')">朗读注解</button>
    </div>
    
    <div id="yulun" class="annotation">
        <div class="annotation-title">餘論</div>
        <p>朱子語類：人不知而不愠，自是不相干涉。己爲學之初，便是不要人知，至此而後真能不要人知爾。若煅煉未能得十分成熟，心固有時被其所動，及到此方真能人不我知而不愠也。又曰：不愠不是大怒，心中略有不平之意便是愠。此非得之深、養之厚者不能如此。鹿善繼四書說約：說樂不愠，向非於人所不見之地有內省不疚之功，何以如此真切，如此超脫？此章是孔子自寫生面，全重時習。蓋本心難昧，未嘗不知修持，祇轉念易乖，學而易厭。時習則功夫無問，本體流行，深造自得，欲罷不能，說可知矣。張履祥備忘錄：朱子謂「不知而不愠者逆而難」，不知豈特爲人忽易而已，甚者賤辱之，咎責之，怨惡之，無所不至。舜之於家，文王於朝，孔孟春秋戰國之世，一時父子兄弟君臣朋友其孰能知之？當時而能不愠，豈非甚難？非甚盛德，何以履之而泰然乎？何義門讀書記：此與中庸「遯世不見知而不悔」同意，非謂世無見用者也。此對上說、樂二字，故云不愠。中庸對上「半塗而廢」，故云不悔。揅經室集：「人不知」者，世之天子諸侯皆不知孔子，而道不行也。「不愠」者，不患無位也。學在孔子，位在天命。天命既無位，則世人必不知矣，此何愠之有乎？孔子曰「五十而知天命」者，此也。此章三節皆孔子一生事實，故弟子論撰之時，以此冠二十篇之首也。二十篇之終曰「不知命，無以爲君子」，與此始終相應也。</p>
        <button class="read-btn" onclick="readAnnotation('yulun')">朗读注解</button>
    </div>
    
    <div id="faming" class="annotation">
        <div class="annotation-title">發明</div>
        <p>梁清遠采榮錄：論語一書，首言爲學，卽曰悦，曰樂，曰君子。此聖人最善誘人處，蓋知人皆憚於學而畏其苦也。是以鼓之以心意之暢適，動之以至美之嘉名，令人有欣羨之意，而不得不勉力於此也。此聖人所以爲萬世師。</p>
        <button class="read-btn" onclick="readAnnotation('faming')">朗读注解</button>
    </div>

    <script>
        // Text-to-Speech implementation
        const synth = window.speechSynthesis;
        let currentUtterance = null;
        
        function showPinyin(pinyin) {
            document.getElementById('pinyin-display').textContent = pinyin;
        }
        
        function readText() {
            if (synth.speaking) {
                synth.cancel();
                return;
            }
            
            const text = "人不知而不愠，不亦君子乎？";
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.9;
            
            currentUtterance = utterance;
            synth.speak(utterance);
        }
        
        function showAnnotation(id) {
            // Hide all annotations first
            document.querySelectorAll('.annotation').forEach(anno => {
                anno.classList.remove('active');
            });
            
            // Show the selected annotation
            document.getElementById(id).classList.add('active');
        }
        
        function readAnnotation(id) {
            if (synth.speaking) {
                synth.cancel();
                return;
            }
            
            const annotation = document.getElementById(id).querySelector('p').textContent;
            const utterance = new SpeechSynthesisUtterance(annotation);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.8;
            
            currentUtterance = utterance;
            synth.speak(utterance);
        }
        
        // Stop speech when clicking elsewhere
        document.addEventListener('click', function(e) {
            if (!e.target.classList.contains('read-btn') && 
                !e.target.classList.contains('char') && 
                e.target.tagName !== 'BUTTON') {
                if (synth.speaking) {
                    synth.cancel();
                }
            }
        });
    </script>
</body>
</html>