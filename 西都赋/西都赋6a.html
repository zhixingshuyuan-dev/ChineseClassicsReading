<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šå…©éƒ½è³¦ã€‹ç¬¬å…­èŠ‚</title>
    <style>
        body {
            font-family: "SimSun", "å®‹é«”", serif;
            line-height: 2.5;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #3a3226;
            color: #e0d5c8;
        }
        
        h1 {
            color: #d4b483;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #5d4b36;
            padding-bottom: 10px;
        }
        
        .main-text {
            font-size: 24px;
            text-align: justify;
            margin-bottom: 30px;
        }
        
        .char {
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        
        .char:hover {
            color: #d4a373;
            text-shadow: 0 0 3px rgba(212, 163, 115, 0.5);
        }
        
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #4a4235;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 300px;
            border: 1px solid #5d4b36;
            color: #e0d5c8;
        }
        
        .popup-content {
            font-size: 16px;
        }
        
        .popup-char {
            font-size: 28px;
            text-align: center;
            margin-bottom: 10px;
            color: #d4b483;
        }
        
        .popup-pinyin, .popup-meaning {
            margin: 8px 0;
            padding: 5px 0;
            border-bottom: 1px dashed #5d4b36;
        }
        
        .popup-close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
            color: #a89984;
        }
        
        .paragraph {
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            margin: 10px 0;
        }
        
        .control-btn {
            width: 32px;
            height: 32px;
            margin-right: 6px;
            border: none;
            border-radius: 50%;
            background: #5d4b36;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: #e0d5c8;
            font-size: 14px;
        }
        
        .control-btn:hover {
            background: #7c6a53;
            transform: scale(1.1);
        }
        
        .annotation {
            font-size: 18px;
            background: #4a4235;
            padding: 12px 15px;
            border-left: 3px solid #a89984;
            margin: 12px 0;
            display: none;
            color: #d4b483;
            border-radius: 0 5px 5px 0;
        }
        
        .toggle-annotation {
            background: #5d4b36;
            border: none;
            color: #e0d5c8;
            cursor: pointer;
            font-size: 14px;
            margin: 5px 0;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .toggle-annotation:hover {
            background: #7c6a53;
        }
        
        .translation-panel {
            display: none;
            background: #4a4235;
            border: 1px solid #5d4b36;
            padding: 12px;
            margin-top: 8px;
            border-radius: 5px;
        }
        
        .lang-btn {
            background: #3a3226;
            border: 1px solid #5d4b36;
            color: #e0d5c8;
            padding: 3px 8px;
            margin-right: 5px;
            margin-bottom: 5px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .lang-btn:hover {
            background: #5d4b36;
        }
        
        .lang-btn.active {
            background: #a89984;
            color: #3a3226;
            font-weight: bold;
        }
        
        .translation-content {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #5d4b36;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .translation-content div {
            display: none;
            padding: 6px 0;
        }
        
        .translation-content div.show {
            display: block;
        }
        
        .punctuation {
            color: #a89984;
        }
        
        .sentence {
            display: inline;
            position: relative;
        }
        
        .sentence.active {
            background-color: rgba(212, 180, 131, 0.3);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>è¥¿éƒ½è³¦</h1>
    
    <div class="main-text">
        <!-- ç¬¬ä¸€æ®µè½ -->
        <div class="paragraph">
            <div class="sentence">
                <span class="char" data-pinyin="fÄ“ng" data-meaning="imperial">å°</span>
                <span class="char" data-pinyin="jÄ«" data-meaning="domain">ç•¿</span>
                <span class="char" data-pinyin="zhÄ«" data-meaning="'s">ä¹‹</span>
                <span class="char" data-pinyin="nÃ¨i" data-meaning="inside">å…§</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="juÃ©" data-meaning="its">å¥</span>
                <span class="char" data-pinyin="tÇ”" data-meaning="land">åœŸ</span>
                <span class="char" data-pinyin="qiÄn" data-meaning="thousand">åƒ</span>
                <span class="char" data-pinyin="lÇ" data-meaning="li">é‡Œ</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="chuÅ" data-meaning="surpassing">é€´</span>
                <span class="char" data-pinyin="luÃ²" data-meaning="surpassing">èº’</span>
                <span class="char" data-pinyin="zhÅ«" data-meaning="all">è«¸</span>
                <span class="char" data-pinyin="xiÃ " data-meaning="Xia">å¤</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="jiÄn" data-meaning="combining">å…¼</span>
                <span class="char" data-pinyin="qÃ­" data-meaning="their">å…¶</span>
                <span class="char" data-pinyin="suÇ’" data-meaning="all">æ‰€</span>
                <span class="char" data-pinyin="yÇ’u" data-meaning="have">æœ‰</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="speakParagraph(this)">ğŸ”Š</button>
                <button class="control-btn" onclick="toggleTranslationPanel(this)">ğŸŒ</button>
                <button class="control-btn" onclick="toggleAnnotation(this)">ğŸ“œ</button>
            </div>
            
            <div class="translation-panel">
                <div>
                    <button class="lang-btn active" onclick="showTranslation(this, 'zh')">ç™½è¯æ–‡</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'en')">English</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'de')">Deutsch</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'fr')">FranÃ§ais</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'es')">EspaÃ±ol</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'it')">Italiano</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ja')">æ—¥æœ¬èª</button>
                </div>
                <div class="translation-content">
                    <div lang="zh" class="show">
                        <p>ç‹ç•¿ä¹‹å†…ï¼Œå…¶åœŸåƒé‡Œã€‚è¶…ç»åå¤è¯¸å›½ï¼Œå…¼æœ‰å…¶æ‰€æœ‰ã€‚</p>
                    </div>
                    <div lang="en">
                        <p>Within the imperial domain, its land extends a thousand li, surpassing all the states of Xia, combining all their riches.</p>
                    </div>
                    <div lang="de">
                        <p>Innerhalb der kaiserlichen DomÃ¤ne erstreckt sich das Land tausend Li, Ã¼bertrifft alle Staaten von Xia und vereint all ihren Reichtum.</p>
                    </div>
                    <div lang="fr">
                        <p>Dans le domaine impÃ©rial, sa terre s'Ã©tend sur mille li, surpassant tous les Ã©tats de Xia, combinant toutes leurs richesses.</p>
                    </div>
                    <div lang="ru">
                        <p>Ğ’ Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ°Ñ… Ğ¸Ğ¼Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ÑĞºĞ¾Ğ³Ğ¾ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° ĞµĞ³Ğ¾ Ğ·ĞµĞ¼Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ñ‚Ñ‹ÑÑÑ‡Ñƒ Ğ»Ğ¸, Ğ¿Ñ€ĞµĞ²Ğ¾ÑÑ…Ğ¾Ğ´Ñ Ğ²ÑĞµ Ğ³Ğ¾ÑÑƒĞ´Ğ°Ñ€ÑÑ‚Ğ²Ğ° Ğ¡Ñ, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑ Ğ²ÑĞµ Ğ¸Ñ… Ğ±Ğ¾Ğ³Ğ°Ñ‚ÑÑ‚Ğ²Ğ°.</p>
                    </div>
                    <div lang="es">
                        <p>Dentro del dominio imperial, su tierra se extiende mil li, superando a todos los estados de Xia, combinando todas sus riquezas.</p>
                    </div>
                    <div lang="it">
                        <p>All'interno del dominio imperiale, la sua terra si estende per mille li, superando tutti gli stati di Xia, combinando tutte le loro ricchezze.</p>
                    </div>
                    <div lang="ja">
                        <p>å°ç•¿ã®å†…ã€ãã®åœŸåƒé‡Œã€‚è«¸å¤ã‚’é€´èº’ã—ã€ãã®æ‰€æœ‰ã‚’å…¼ã¬ã€‚</p>
                    </div>
                </div>
            </div>
            
            <button class="toggle-annotation" onclick="toggleAnnotationPanel(this)">é¡¯ç¤ºè¨»é‡‹</button>
            <div class="annotation">
                ã€Šæ¼¢æ›¸ã€‹æ›°ï¼šé›’é‚‘èˆ‡å®—å‘¨é€šå°ç•¿ï¼Œçˆ²åƒé‡Œã€‚åˆæ›°ï¼šç§¦åœ°æ²ƒé‡åƒé‡Œï¼Œäººä»¥å¯Œé¥’ã€‚é€´èº’ï¼ŒçŒ¶è¶…çµ•ä¹Ÿã€‚é€´ï¼ŒéŸ³å“ã€‚èº’ï¼Œå‘‚è§’åˆ‡ã€‚ã€Šè«–èªã€‹ï¼Œå­æ›°ï¼šå¤·ç‹„ä¹‹æœ‰å›ï¼Œä¸å¦‚è«¸å¤ä¹‹äº¡ä¹Ÿã€‚
            </div>
        </div>

        <!-- ç¬¬äºŒæ®µè½ -->
        <div class="paragraph">
            <div class="sentence">
                <span class="char" data-pinyin="qÃ­" data-meaning="its">å…¶</span>
                <span class="char" data-pinyin="yÃ¡ng" data-meaning="southern">é™½</span>
                <span class="char" data-pinyin="zÃ©" data-meaning="then">å‰‡</span>
                <span class="char" data-pinyin="chÃ³ng" data-meaning="lofty">å´‡</span>
                <span class="char" data-pinyin="shÄn" data-meaning="mountains">å±±</span>
                <span class="char" data-pinyin="yÇn" data-meaning="hiding">éš±</span>
                <span class="char" data-pinyin="tiÄn" data-meaning="sky">å¤©</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="yÅu" data-meaning="deep">å¹½</span>
                <span class="char" data-pinyin="lÃ­n" data-meaning="forests">æ—</span>
                <span class="char" data-pinyin="qiÃ³ng" data-meaning="profound">ç©¹</span>
                <span class="char" data-pinyin="gÇ”" data-meaning="valleys">è°·</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="lÃ¹" data-meaning="land">é™¸</span>
                <span class="char" data-pinyin="hÇi" data-meaning="sea">æµ·</span>
                <span class="char" data-pinyin="zhÄ“n" data-meaning="hidden">ç</span>
                <span class="char" data-pinyin="cÃ¡ng" data-meaning="treasures">è—</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="lÃ¡n" data-meaning="Lantian">è—</span>
                <span class="char" data-pinyin="tiÃ¡n" data-meaning="field">ç”°</span>
                <span class="char" data-pinyin="mÄ›i" data-meaning="fine">ç¾</span>
                <span class="char" data-pinyin="yÃ¹" data-meaning="jade">ç‰</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="speakParagraph(this)">ğŸ”Š</button>
                <button class="control-btn" onclick="toggleTranslationPanel(this)">ğŸŒ</button>
                <button class="control-btn" onclick="toggleAnnotation(this)">ğŸ“œ</button>
            </div>
            
            <div class="translation-panel">
                <div>
                    <button class="lang-btn active" onclick="showTranslation(this, 'zh')">ç™½è¯æ–‡</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'en')">English</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'de')">Deutsch</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'fr')">FranÃ§ais</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'es')">EspaÃ±ol</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'it')">Italiano</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ja')">æ—¥æœ¬èª</button>
                </div>
                <div class="translation-content">
                    <div lang="zh" class="show">
                        <p>å…¶é˜³åˆ™æœ‰é«˜å±±éšå¤©ï¼Œå¹½æ—æ·±è°·ã€‚é™†æµ·çè—ï¼Œè“ç”°ç¾ç‰ã€‚</p>
                    </div>
                    <div lang="en">
                        <p>Its southern side has lofty mountains hiding the sky, deep forests and profound valleys, land as rich as the sea with hidden treasures and fine jade from Lantian.</p>
                    </div>
                    <div lang="de">
                        <p>Seine sÃ¼dliche Seite hat hohe Berge, die den Himmel verbergen, tiefe WÃ¤lder und tiefe TÃ¤ler, Land so reich wie das Meer mit verborgenen SchÃ¤tzen und feinem Jade aus Lantian.</p>
                    </div>
                    <div lang="fr">
                        <p>Son cÃ´tÃ© sud a de hautes montagnes cachant le ciel, des forÃªts profondes et des vallÃ©es profondes, une terre aussi riche que la mer avec des trÃ©sors cachÃ©s et du jade fin de Lantian.</p>
                    </div>
                    <div lang="ru">
                        <p>Ğ•Ğ³Ğ¾ ÑĞ¶Ğ½Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ° Ğ¸Ğ¼ĞµĞµÑ‚ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğµ Ğ³Ğ¾Ñ€Ñ‹, ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğµ Ğ½ĞµĞ±Ğ¾, Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğµ Ğ»ĞµÑĞ° Ğ¸ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğµ Ğ´Ğ¾Ğ»Ğ¸Ğ½Ñ‹, Ğ·ĞµĞ¼Ğ»Ñ, ÑÑ‚Ğ¾Ğ»ÑŒ Ğ¶Ğµ Ğ±Ğ¾Ğ³Ğ°Ñ‚ÑƒÑ, ĞºĞ°Ğº Ğ¼Ğ¾Ñ€Ğµ, ÑĞ¾ ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼Ğ¸ ÑĞ¾ĞºÑ€Ğ¾Ğ²Ğ¸Ñ‰Ğ°Ğ¼Ğ¸ Ğ¸ Ğ¿Ñ€ĞµĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¼ Ğ½ĞµÑ„Ñ€Ğ¸Ñ‚Ğ¾Ğ¼ Ğ¸Ğ· Ğ›Ğ°Ğ½ÑŒÑ‚ÑĞ½ÑŒ.</p>
                    </div>
                    <div lang="es">
                        <p>Su lado sur tiene altas montaÃ±as que ocultan el cielo, bosques profundos y valles profundos, tierra tan rica como el mar con tesoros escondidos y jade fino de Lantian.</p>
                    </div>
                    <div lang="it">
                        <p>Il suo lato sud ha alte montagne che nascondono il cielo, foreste profonde e valli profonde, terra ricca come il mare con tesori nascosti e giada fine di Lantian.</p>
                    </div>
                    <div lang="ja">
                        <p>ãã®é™½ã¯å‰‡ã¡å´‡å±±å¤©ã‚’éš ã—ã€å¹½æ—ç©¹è°·ã€‚é™¸æµ·ã®çè—ã€è—ç”°ã®ç¾ç‰ã€‚</p>
                    </div>
                </div>
            </div>
            
            <button class="toggle-annotation" onclick="toggleAnnotationPanel(this)">é¡¯ç¤ºè¨»é‡‹</button>
            <div class="annotation">
                ã€Šä¸Šæ—è³¦ã€‹æ›°ï¼šå´‡å±±åµ¸å·ƒå´”åµ¬ã€‚æ¥Šé›„ã€Šèœ€éƒ½è³¦ã€‹æ›°ï¼šè’¼å±±éš±å¤©ã€‚ã€ŠéŸ“è©©ã€‹æ›°ï¼šçšçšç™½é§’ï¼Œåœ¨å½¼ç©ºè°·ã€‚è–›å›æ›°ï¼šç©¹è°·ï¼Œæ·±è°·ä¹Ÿã€‚ã€Šæ¼¢æ›¸ã€‹ï¼Œæ±æ–¹æœ”æ›°ï¼šæ¼¢èˆˆï¼Œå»ä¸‰æ²³ä¹‹åœ°ï¼Œæ­¢çã€æ»»ä»¥è¥¿ï¼Œéƒ½æ¶‡ã€æ¸­ä¹‹å—ï¼ŒåŒ—è¬‚å¤©ä¸‹é™¸æµ·ä¹‹åœ°ã€‚ã€ŠèŒƒå­è¨ˆç„¶ã€‹æ›°ï¼šç‰è‹±å‡ºè—ç”°ã€‚
            </div>
        </div>

        <!-- ç¬¬ä¸‰æ®µè½ -->
        <div class="paragraph">
            <div class="sentence">
                <span class="char" data-pinyin="shÄng" data-meaning="Shang">å•†</span>
                <span class="char" data-pinyin="luÃ²" data-meaning="Luo">æ´›</span>
                <span class="char" data-pinyin="yuÃ¡n" data-meaning="border">ç·£</span>
                <span class="char" data-pinyin="qÃ­" data-meaning="its">å…¶</span>
                <span class="char" data-pinyin="wÄ“i" data-meaning="curves">éšˆ</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="hÃ¹" data-meaning="Hu">é„ </span>
                <span class="char" data-pinyin="dÃ¹" data-meaning="Du">æœ</span>
                <span class="char" data-pinyin="bÄ«n" data-meaning="lie">æ¿±</span>
                <span class="char" data-pinyin="qÃ­" data-meaning="its">å…¶</span>
                <span class="char" data-pinyin="zÃº" data-meaning="foot">è¶³</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="yuÃ¡n" data-meaning="springs">æº</span>
                <span class="char" data-pinyin="quÃ¡n" data-meaning="streams">æ³‰</span>
                <span class="char" data-pinyin="guÃ n" data-meaning="pour">çŒ</span>
                <span class="char" data-pinyin="zhÃ¹" data-meaning="forth">æ³¨</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="bÄ“i" data-meaning="ponds">é™‚</span>
                <span class="char" data-pinyin="chÃ­" data-meaning="pools">æ± </span>
                <span class="char" data-pinyin="jiÄo" data-meaning="interconnect">äº¤</span>
                <span class="char" data-pinyin="shÇ”" data-meaning="connect">å±¬</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="speakParagraph(this)">ğŸ”Š</button>
                <button class="control-btn" onclick="toggleTranslationPanel(this)">ğŸŒ</button>
                <button class="control-btn" onclick="toggleAnnotation(this)">ğŸ“œ</button>
            </div>
            
            <div class="translation-panel">
                <div>
                    <button class="lang-btn active" onclick="showTranslation(this, 'zh')">ç™½è¯æ–‡</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'en')">English</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'de')">Deutsch</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'fr')">FranÃ§ais</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'es')">EspaÃ±ol</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'it')">Italiano</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ja')">æ—¥æœ¬èª</button>
                </div>
                <div class="translation-content">
                    <div lang="zh" class="show">
                        <p>å•†æ´›ç¼˜å…¶éšˆï¼Œé„ æœæ»¨å…¶è¶³ã€‚æºæ³‰çŒæ³¨ï¼Œé™‚æ± äº¤å±ã€‚</p>
                    </div>
                    <div lang="en">
                        <p>Shang and Luo border its curves, Hu and Du lie along its foot. Springs and streams pour forth, and ponds and pools interconnect.</p>
                    </div>
                    <div lang="de">
                        <p>Shang und Luo grenzen an seine Kurven, Hu und Du liegen an seinem FuÃŸ. Quellen und BÃ¤che strÃ¶men hervor, und Teiche und Pools sind miteinander verbunden.</p>
                    </div>
                    <div lang="fr">
                        <p>Shang et Luo bordent ses courbes, Hu et Du se trouvent le long de son pied. Les sources et les ruisseaux jaillissent, et les Ã©tangs et les bassins sont interconnectÃ©s.</p>
                    </div>
                    <div lang="ru">
                        <p>Ğ¨Ğ°Ğ½ Ğ¸ Ğ›Ğ¾ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ°Ñ‚ Ñ ĞµĞ³Ğ¾ Ğ¸Ğ·Ğ³Ğ¸Ğ±Ğ°Ğ¼Ğ¸, Ğ¥Ñƒ Ğ¸ Ğ”Ñƒ Ğ»ĞµĞ¶Ğ°Ñ‚ Ñƒ ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ´Ğ½Ğ¾Ğ¶Ğ¸Ñ. Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ¸ Ñ€ÑƒÑ‡ÑŒĞ¸ Ğ¸Ğ·Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ, Ğ° Ğ¿Ñ€ÑƒĞ´Ñ‹ Ğ¸ Ğ±Ğ°ÑÑĞµĞ¹Ğ½Ñ‹ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾ÑĞ²ÑĞ·Ğ°Ğ½Ñ‹.</p>
                    </div>
                    <div lang="es">
                        <p>Shang y Luo bordean sus curvas, Hu y Du yacen a lo largo de su pie. Los manantiales y arroyos brotan, y los estanques y piscinas estÃ¡n interconectados.</p>
                    </div>
                    <div lang="it">
                        <p>Shang e Luo delimitano le sue curve, Hu e Du giacciono lungo il suo piede. Sorgenti e ruscelli sgorgano, e stagni e piscine sono interconnessi.</p>
                    </div>
                    <div lang="ja">
                        <p>å•†æ´›å…¶ã®éšˆã«ç¸ã‚Šã€é„ æœå…¶ã®è¶³ã«æ¿±ã‚‹ã€‚æºæ³‰çŒæ³¨ã—ã€é™‚æ± äº¤å±¬ã™ã€‚</p>
                    </div>
                </div>
            </div>
            
            <button class="toggle-annotation" onclick="toggleAnnotationPanel(this)">é¡¯ç¤ºè¨»é‡‹</button>
            <div class="annotation">
                ã€Šæ¼¢æ›¸ã€‹ï¼Œå¼˜è¾²éƒ¡æœ‰å•†ç¸£ã€ä¸Šé›’ç¸£ã€‚æ‰¶é¢¨æœ‰é„ ç¸£ã€æœé™½ç¸£ã€‚ã€Šèªªæ–‡ã€‹æ›°ï¼šéšˆï¼Œæ°´æ›²ä¹Ÿï¼Œæ–¼å›åˆ‡ã€‚å­”å®‰åœ‹ã€Šå°™æ›¸å‚³ã€‹æ›°ï¼šæ¿±ï¼Œæ¶¯ä¹Ÿã€‚åˆæ›°ï¼šæ¾¤é„£æ›°é™‚ï¼Œåœæ°´æ›°æ± ã€‚
            </div>
        </div>

        <!-- ç¬¬å››æ®µè½ -->
        <div class="paragraph">
            <div class="sentence">
                <span class="char" data-pinyin="zhÃº" data-meaning="bamboo">ç«¹</span>
                <span class="char" data-pinyin="lÃ­n" data-meaning="groves">æ—</span>
                <span class="char" data-pinyin="guÇ’" data-meaning="fruit">æœ</span>
                <span class="char" data-pinyin="yuÃ¡n" data-meaning="orchards">åœ’</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="fÄng" data-meaning="fragrant">èŠ³</span>
                <span class="char" data-pinyin="cÇo" data-meaning="grasses">è‰</span>
                <span class="char" data-pinyin="gÄn" data-meaning="sweet">ç”˜</span>
                <span class="char" data-pinyin="mÃ¹" data-meaning="trees">æœ¨</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="jiÄo" data-meaning="suburbs">éƒŠ</span>
                <span class="char" data-pinyin="yÄ›" data-meaning="countryside">é‡</span>
                <span class="char" data-pinyin="zhÄ«" data-meaning="'s">ä¹‹</span>
                <span class="char" data-pinyin="fÃ¹" data-meaning="wealth">å¯Œ</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="hÃ o" data-meaning="said">è™Ÿ</span>
                <span class="char" data-pinyin="wÃ©i" data-meaning="to">çˆ²</span>
                <span class="char" data-pinyin="jÃ¬n" data-meaning="rival">è¿‘</span>
                <span class="char" data-pinyin="shÇ”" data-meaning="Shu">èœ€</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="speakParagraph(this)">ğŸ”Š</button>
                <button class="control-btn" onclick="toggleTranslationPanel(this)">ğŸŒ</button>
                <button class="control-btn" onclick="toggleAnnotation(this)">ğŸ“œ</button>
            </div>
            
            <div class="translation-panel">
                <div>
                    <button class="lang-btn active" onclick="showTranslation(this, 'zh')">ç™½è¯æ–‡</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'en')">English</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'de')">Deutsch</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'fr')">FranÃ§ais</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'es')">EspaÃ±ol</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'it')">Italiano</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ja')">æ—¥æœ¬èª</button>
                </div>
                <div class="translation-content">
                    <div lang="zh" class="show">
                        <p>ç«¹æ—æœå›­ï¼ŒèŠ³è‰ç”˜æœ¨ã€‚éƒŠé‡ä¹‹å¯Œï¼Œå·ä¸ºè¿‘èœ€ã€‚</p>
                    </div>
                    <div lang="en">
                        <p>Bamboo groves and fruit orchards, fragrant grasses and sweet trees. The wealth of the suburbs and countryside is said to rival that of Shu.</p>
                    </div>
                    <div lang="de">
                        <p>Bambushaine und ObstgÃ¤rten, duftende GrÃ¤ser und sÃ¼ÃŸe BÃ¤ume. Der Reichtum der Vororte und des Landes soll dem von Shu entsprechen.</p>
                    </div>
                    <div lang="fr">
                        <p>Bambouseraies et vergers, herbes parfumÃ©es et arbres doux. La richesse des banlieues et de la campagne est dite rivaliser avec celle de Shu.</p>
                    </div>
                    <div lang="ru">
                        <p>Ğ‘Ğ°Ğ¼Ğ±ÑƒĞºĞ¾Ğ²Ñ‹Ğµ Ñ€Ğ¾Ñ‰Ğ¸ Ğ¸ Ñ„Ñ€ÑƒĞºÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑĞ°Ğ´Ñ‹, Ğ´ÑƒÑˆĞ¸ÑÑ‚Ñ‹Ğµ Ñ‚Ñ€Ğ°Ğ²Ñ‹ Ğ¸ ÑĞ»Ğ°Ğ´ĞºĞ¸Ğµ Ğ´ĞµÑ€ĞµĞ²ÑŒÑ. Ğ‘Ğ¾Ğ³Ğ°Ñ‚ÑÑ‚Ğ²Ğ¾ Ğ¿Ñ€Ğ¸Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ² Ğ¸ ÑĞµĞ»ÑŒÑĞºĞ¾Ğ¹ Ğ¼ĞµÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸, ĞºĞ°Ğº Ğ³Ğ¾Ğ²Ğ¾Ñ€ÑÑ‚, ÑĞ¾Ğ¿ĞµÑ€Ğ½Ğ¸Ñ‡Ğ°ĞµÑ‚ Ñ Ğ±Ğ¾Ğ³Ğ°Ñ‚ÑÑ‚Ğ²Ğ¾Ğ¼ Ğ¨Ñƒ.</p>
                    </div>
                    <div lang="es">
                        <p>BambÃºes y huertos de frutas, hierbas fragantes y Ã¡rboles dulces. La riqueza de los suburbios y el campo se dice que rivaliza con la de Shu.</p>
                    </div>
                    <div lang="it">
                        <p>BambÃ¹ e frutteti, erbe profumate e alberi dolci. La ricchezza dei sobborghi e della campagna si dice che rivaleggi con quella di Shu.</p>
                    </div>
                    <div lang="ja">
                        <p>ç«¹æ—æœåœ’ã€èŠ³è‰ç”˜æœ¨ã€‚éƒŠé‡ã®å¯Œã€å·ã—ã¦è¿‘èœ€ã¨çˆ²ã™ã€‚</p>
                    </div>
                </div>
            </div>
            
            <button class="toggle-annotation" onclick="toggleAnnotationPanel(this)">é¡¯ç¤ºè¨»é‡‹</button>
            <div class="annotation">
                è¨€ç§¦å¢ƒå¯Œé¥’ï¼Œèˆ‡èœ€ç›¸é¡ï¼Œæ•…è™Ÿè¿‘èœ€ç„‰ã€‚ã€Šæ¼¢æ›¸ã€‹æ›°ï¼šç§¦åœ°å—æœ‰å·´ã€èœ€ã€å»£ã€æ¼¢å±±æ—ç«¹æœ¨è”¬é£Ÿæœå¯¦ä¹‹é¥’ã€‚ã€Šçˆ¾é›…ã€‹æ›°ï¼šé‚‘å¤–æ›°éƒŠï¼ŒéƒŠå¤–æ›°é‡ã€‚
            </div>
        </div>

        <!-- ç¬¬äº”æ®µè½ -->
        <div class="paragraph">
            <div class="sentence">
                <span class="char" data-pinyin="qÃ­" data-meaning="its">å…¶</span>
                <span class="char" data-pinyin="yÄ«n" data-meaning="northern">é™°</span>
                <span class="char" data-pinyin="zÃ©" data-meaning="then">å‰‡</span>
                <span class="char" data-pinyin="guÃ n" data-meaning="crowned">å† </span>
                <span class="char" data-pinyin="yÇ" data-meaning="by">ä»¥</span>
                <span class="char" data-pinyin="jiÇ”" data-meaning="nine">ä¹</span>
                <span class="char" data-pinyin="zÅng" data-meaning="peaks">åµ•</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="pÃ©i" data-meaning="accompanied">é™ª</span>
                <span class="char" data-pinyin="yÇ" data-meaning="by">ä»¥</span>
                <span class="char" data-pinyin="gÄn" data-meaning="sweet">ç”˜</span>
                <span class="char" data-pinyin="quÃ¡n" data-meaning="springs">æ³‰</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="nÇi" data-meaning="where">ä¹ƒ</span>
                <span class="char" data-pinyin="yÇ’u" data-meaning="have">æœ‰</span>
                <span class="char" data-pinyin="lÃ­ng" data-meaning="divine">éˆ</span>
                <span class="char" data-pinyin="gÅng" data-meaning="palaces">å®®</span>
                <span class="char" data-pinyin="qÇ" data-meaning="rise">èµ·</span>
                <span class="char" data-pinyin="hÅ«" data-meaning="among">ä¹</span>
                <span class="char" data-pinyin="qÃ­" data-meaning="them">å…¶</span>
                <span class="char" data-pinyin="zhÅng" data-meaning="among">ä¸­</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="qÃ­n" data-meaning="Qin">ç§¦</span>
                <span class="char" data-pinyin="hÃ n" data-meaning="Han">æ¼¢</span>
                <span class="char" data-pinyin="zhÄ«" data-meaning="'s">ä¹‹</span>
                <span class="char" data-pinyin="suÇ’" data-meaning="the">æ‰€</span>
                <span class="char" data-pinyin="jÃ­" data-meaning="ultimate">æ¥µ</span>
                <span class="char" data-pinyin="guÄn" data-meaning="sights">è§€</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="yuÄn" data-meaning="Yuan">æ·µ</span>
                <span class="char" data-pinyin="yÃºn" data-meaning="Yun">é›²</span>
                <span class="char" data-pinyin="zhÄ«" data-meaning="'s">ä¹‹</span>
                <span class="char" data-pinyin="suÇ’" data-meaning="the">æ‰€</span>
                <span class="char" data-pinyin="sÃ²ng" data-meaning="praises">é Œ</span>
                <span class="char" data-pinyin="tÃ n" data-meaning="admiration">æ­</span>
                <span class="char punctuation" data-pinyin="ï¼Œ" data-meaning="comma">ï¼Œ</span>
            </div>
            <div class="sentence">
                <span class="char" data-pinyin="yÃº" data-meaning="here">æ–¼</span>
                <span class="char" data-pinyin="shÃ¬" data-meaning="here">æ˜¯</span>
                <span class="char" data-pinyin="hÅ«" data-meaning="particle">ä¹</span>
                <span class="char" data-pinyin="cÃºn" data-meaning="preserved">å­˜</span>
                <span class="char" data-pinyin="yÄn" data-meaning="here">ç„‰</span>
                <span class="char punctuation" data-pinyin="ã€‚" data-meaning="period">ã€‚</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="speakParagraph(this)">ğŸ”Š</button>
                <button class="control-btn" onclick="toggleTranslationPanel(this)">ğŸŒ</button>
                <button class="control-btn" onclick="toggleAnnotation(this)">ğŸ“œ</button>
            </div>
            
            <div class="translation-panel">
                <div>
                    <button class="lang-btn active" onclick="showTranslation(this, 'zh')">ç™½è¯æ–‡</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'en')">English</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'de')">Deutsch</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'fr')">FranÃ§ais</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ru')">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'es')">EspaÃ±ol</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'it')">Italiano</button>
                    <button class="lang-btn" onclick="showTranslation(this, 'ja')">æ—¥æœ¬èª</button>
                </div>
                <div class="translation-content">
                    <div lang="zh" class="show">
                        <p>å…¶é˜´åˆ™å† ä»¥ä¹åµ•ï¼Œé™ªä»¥ç”˜æ³‰ï¼Œä¹ƒæœ‰çµå®«èµ·ä¹å…¶ä¸­ã€‚ç§¦æ±‰ä¹‹æ‰€æè§‚ï¼Œæ¸Šäº‘ä¹‹æ‰€é¢‚å¹ï¼Œäºæ˜¯ä¹å­˜ç„‰ã€‚</p>
                    </div>
                    <div lang="en">
                        <p>Its northern side is crowned by the nine peaks and accompanied by sweet springs, where divine palaces rise among them. The ultimate sights of the Qin and Han dynasties, the praises and admiration of Yuan and Yun are preserved here.</p>
                    </div>
                    <div lang="de">
                        <p>Seine nÃ¶rdliche Seite wird von den neun Gipfeln gekrÃ¶nt und von sÃ¼ÃŸen Quellen begleitet, wo gÃ¶ttliche PalÃ¤ste unter ihnen aufsteigen. Die ultimativen SehenswÃ¼rdigkeiten der Qin- und Han-Dynastien, die Lobpreisungen und Bewunderung von Yuan und Yun sind hier erhalten.</p>
                    </div>
                    <div lang="fr">
                        <p>Son cÃ´tÃ© nord est couronnÃ© par les neuf sommets et accompagnÃ© de sources douces, oÃ¹ des palais divins s'Ã©lÃ¨vent parmi eux. Les vues ultimes des dynasties Qin et Han, les louanges et l'admiration de Yuan et Yun sont prÃ©servÃ©es ici.</p>
                    </div>
                    <div lang="ru">
                        <p>Ğ•Ğ³Ğ¾ ÑĞµĞ²ĞµÑ€Ğ½Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ° ÑƒĞ²ĞµĞ½Ñ‡Ğ°Ğ½Ğ° Ğ´ĞµĞ²ÑÑ‚ÑŒÑ Ğ²ĞµÑ€ÑˆĞ¸Ğ½Ğ°Ğ¼Ğ¸ Ğ¸ ÑĞ¾Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ÑÑ ÑĞ»Ğ°Ğ´ĞºĞ¸Ğ¼Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸, Ğ³Ğ´Ğµ ÑÑ€ĞµĞ´Ğ¸ Ğ½Ğ¸Ñ… Ğ²Ğ¾Ğ·Ğ²Ñ‹ÑˆĞ°ÑÑ‚ÑÑ Ğ±Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ²Ğ¾Ñ€Ñ†Ñ‹. Ğ—Ğ´ĞµÑÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸ÑÑŒ Ğ²ĞµĞ»Ğ¸Ñ‡Ğ°Ğ¹ÑˆĞ¸Ğµ Ğ´Ğ¾ÑÑ‚Ğ¾Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¸Ğ½Ğ°ÑÑ‚Ğ¸Ğ¹ Ğ¦Ğ¸Ğ½ÑŒ Ğ¸ Ğ¥Ğ°Ğ½ÑŒ, Ğ²Ğ¾ÑÑ…Ğ²Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¸ Ğ²Ğ¾ÑÑ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğµ Ğ®Ğ°Ğ½ÑŒ Ğ¸ Ğ®Ğ½ÑŒ.</p>
                    </div>
                    <div lang="es">
                        <p>Su lado norte estÃ¡ coronado por los nueve picos y acompaÃ±ado por dulces manantiales, donde se alzan palacios divinos entre ellos. Las vistas definitivas de las dinastÃ­as Qin y Han, los elogios y la admiraciÃ³n de Yuan y Yun se conservan aquÃ­.</p>
                    </div>
                    <div lang="it">
                        <p>Il suo lato nord Ã¨ coronato dai nove picchi e accompagnato da dolci sorgenti, dove si ergono palazzi divini tra loro. Le viste ultime delle dinastie Qin e Han, le lodi e l'ammirazione di Yuan e Yun sono conservate qui.</p>
                    </div>
                    <div lang="ja">
                        <p>ãã®é™°ã¯å‰‡ã¡ä¹åµ•ã‚’ä»¥ã¦å† ã¨ã—ã€ç”˜æ³‰ã‚’ä»¥ã¦é™ªã¨ã™ã€‚ä¹ƒã¡éœŠå®®å…¶ã®ä¸­ã«èµ·ã‚‹æœ‰ã‚Šã€‚ç§¦æ¼¢ã®æ¥µè¦³ã€æ·µé›²ã®é Œæ­ã€æ˜¯ã«æ–¼ã¦å­˜ã™ã€‚</p>
                    </div>
                </div>
            </div>
            
            <button class="toggle-annotation" onclick="toggleAnnotationPanel(this)">é¡¯ç¤ºè¨»é‡‹</button>
            <div class="annotation">
                ã€Šæ¼¢æ›¸ã€‹ï¼Œè°·å£ç¸£ä¹åµ•å±±åœ¨è¥¿ã€‚ã€Šæˆ°åœ‹ç­–ã€‹ï¼ŒèŒƒé›èªªç§¦ç‹æ›°ï¼šå¤§ç‹ä¹‹åœ‹ï¼ŒåŒ—æœ‰ç”˜æ³‰è°·å£ã€‚ã€Šæ¼¢æ›¸ã€‹ï¼Œå…¬å­«å¿æ›°ï¼šä»™äººå¥½æ¨“å±…ã€‚æ–¼æ˜¯ä¸Šä»¤ç”˜æ³‰ä½œå»¶å£½é¤¨ã€é€šå¤©è‡ºã€‚ã€Šæ¼¢å®®é—•ç–ã€‹æ›°ï¼šç”˜æ³‰æ—å…‰å®®ï¼Œç§¦äºŒä¸–é€ ã€‚ã€Šæ¼¢æ›¸ã€‹æ›°ï¼šç‹å­æ·µçˆ²ã€Šç”˜æ³‰é Œã€‹ã€‚åˆæ›°ï¼šæ¥Šå­é›²å¥ã€Šç”˜æ³‰è³¦ã€‹ã€‚
            </div>
        </div>
    </div>
    
    <!-- å¼¹å‡ºçª—å£ -->
    <div class="popup" id="charPopup">
        <span class="popup-close" onclick="closePopup()">Ã—</span>
        <div class="popup-content">
            <div class="popup-char"></div>
            <div class="popup-pinyin"></div>
            <div class="popup-meaning"></div>
        </div>
    </div>
    
    <script>
        // å•å­—ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.char').forEach(char => {
            char.addEventListener('click', function() {
                const popup = document.getElementById('charPopup');
                popup.querySelector('.popup-char').textContent = this.textContent;
                popup.querySelector('.popup-pinyin').textContent = `æ‹¼éŸ³: ${this.dataset.pinyin}`;
                popup.querySelector('.popup-meaning').textContent = `é‡Šä¹‰: ${this.dataset.meaning}`;
                popup.style.display = 'block';
            });
        });
        
        // å…³é—­å¼¹å‡ºçª—å£
        function closePopup() {
            document.getElementById('charPopup').style.display = 'none';
        }
        
        // æ®µè½æœ—è¯»åŠŸèƒ½
        let currentParagraphUtterances = [];
        let currentReadingParagraph = null;
        
        function speakParagraph(btn) {
            const paragraph = btn.closest('.paragraph');
            
            // å¦‚æœæ­£åœ¨æœ—è¯»å½“å‰æ®µè½ï¼Œåœæ­¢
            if (currentReadingParagraph === paragraph && window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                resetAllSentenceHighlights();
                btn.textContent = 'ğŸ”Š';
                currentReadingParagraph = null;
                return;
            }
            
            // å¦‚æœæ­£åœ¨æœ—è¯»å…¶ä»–æ®µè½ï¼Œå…ˆåœæ­¢
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                resetAllSentenceHighlights();
                document.querySelectorAll('.control-btn').forEach(b => {
                    if (b.textContent === 'â¹') b.textContent = 'ğŸ”Š';
                });
            }
            
            // å¼€å§‹æœ—è¯»æ–°æ®µè½
            currentReadingParagraph = paragraph;
            btn.textContent = 'â¹';
            
            const sentences = paragraph.querySelectorAll('.sentence');
            currentParagraphUtterances = [];
            
            // å‡†å¤‡æ‰€æœ‰å¥å­è¯­éŸ³
            sentences.forEach((sentence, index) => {
                let sentenceText = '';
                sentence.querySelectorAll('.char').forEach(char => {
                    if (!char.classList.contains('punctuation') || 
                        ['ï¼Œ', 'ã€‚', 'ï¼', 'ï¼Ÿ', 'ï¼š', 'ï¼›'].includes(char.textContent)) {
                        sentenceText += char.textContent;
                    }
                });
                
                const utterance = new SpeechSynthesisUtterance(sentenceText);
                utterance.lang = 'zh-TW';
                utterance.rate = 0.8;
                
                utterance.onstart = function() {
                    resetAllSentenceHighlights();
                    sentence.classList.add('active');
                    
                    // æ»šåŠ¨åˆ°å½“å‰å¥å­
                    sentence.scrollIntoView({ behavior: 'smooth', block: 'center' });
                };
                
                utterance.onend = function() {
                    if (index === sentences.length - 1) {
                        btn.textContent = 'ğŸ”Š';
                        currentReadingParagraph = null;
                    }
                };
                
                currentParagraphUtterances.push(utterance);
            });
            
            // æŒ‰é¡ºåºæœ—è¯»æ‰€æœ‰å¥å­
            currentParagraphUtterances.forEach((utterance, index) => {
                // è®¾ç½®å»¶è¿Ÿï¼Œä½¿å¥å­ä¹‹é—´æœ‰è‡ªç„¶åœé¡¿
                if (index > 0) {
                    const prevDuration = currentParagraphUtterances[index-1].text.length * 100; // ä¼°ç®—å‰ä¸€å¥æŒç»­æ—¶é—´
                    utterance.startTime = Date.now() + prevDuration + 300; // 300msé¢å¤–åœé¡¿
                }
                window.speechSynthesis.speak(utterance);
            });
        }
        
        function resetAllSentenceHighlights() {
            document.querySelectorAll('.sentence').forEach(s => {
                s.classList.remove('active');
            });
        }
        
        // æ˜¾ç¤º/éšè—æ³¨é‡Šé¢æ¿
        function toggleAnnotationPanel(btn) {
            const annotation = btn.nextElementSibling;
            if (annotation.style.display === 'block') {
                annotation.style.display = 'none';
                btn.textContent = 'é¡¯ç¤ºè¨»é‡‹';
            } else {
                annotation.style.display = 'block';
                btn.textContent = 'éš±è—è¨»é‡‹';
            }
        }
        
        // æ˜¾ç¤º/éšè—ç¿»è¯‘é¢æ¿
        function toggleTranslationPanel(btn) {
            const panel = btn.closest('.paragraph').querySelector('.translation-panel');
            if (panel.style.display === 'block') {
                panel.style.display = 'none';
            } else {
                panel.style.display = 'block';
            }
        }
        
        // åˆ‡æ¢ç¿»è¯‘è¯­è¨€
        function showTranslation(btn, lang) {
            const panel = btn.closest('.translation-panel').querySelector('.translation-content');
            panel.querySelectorAll('div').forEach(div => {
                div.classList.remove('show');
            });
            panel.querySelector(`div[lang="${lang}"]`).classList.add('show');
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            btn.closest('.translation-panel').querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
        }
        
        // ç‚¹å‡»ç©ºç™½å¤„å…³é—­å¼¹å‡ºçª—å£
        window.addEventListener('click', function(event) {
            if (event.target === document.getElementById('charPopup')) {
                closePopup();
            }
        });
    </script>
</body>
</html>
